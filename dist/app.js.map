{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/icon-16.png","webpack:///./assets/icon-32.png","webpack:///./assets/icon-80_1.png","webpack:///./src/app/app.js","webpack:///./src/app/attention.js","webpack:///./src/app/services/filedata.service.js","webpack:///./src/app/services/gateway.service.js","webpack:///./src/app/services/session.service.js","webpack:///./src/app/utils.js"],"names":["prodEnvironment","haveCamera","userIp","iter","terms","customerFirstName","userFromOffice","userIsActive","isNewUser","counter","outsideOffice","data","email","password","Office","onReady","info","localStorage","getItem","console","log","host","HostType","Word","getEnvironment","Utils","then","value","filedataService","getIp","respuesta","ip","setItem","document","getElementById","style","paddingTop","innerHTML","getElementsByClassName","element","display","moveTitles","onInput","submit","oninput","onsubmit","onSubmit","event","undefined","preventDefault","target","id","validateEmail","passDOM","window","location","href","showInputInvalid","sessionService","authId","gatewayService","validate","hit","providedToken","nextStep","properties","TOKEN","resizeTo","attention","title","content","clearForm","borderColor","response","error","statusCode","textContent","isMobile","innerWidth","isTablet","isDesktop","windowInfo","validateUser","browser","os","userExists","login","required1","createAttribute","required2","required3","required4","attributes","setNamedItem","contentFromLS","getIdFromOffice","RefreshLayout","req1","req2","pass1","pass2","isValid","classList","contains","createNewUser","password1","password2","disabled","createCustomer","firstName","lastName","user","customerMobile","Respuesta","status","message","idCustomer","validateThisUser","process","askOTPfromUser","timeDown","modal","querySelector","overflow","form","phoneNumber","resendCode","addEventListener","e","pin","acceptTerms","Resp","success","addToMiFirma","innerText","auth_code","status_code","getValidationParameter","activationMessage","activationBase64","btoa","activateAccount","showSuccess","showProcessError","modalContent","authority","customerLastName","processTerms","routerInstance","navigate","fromOffice","requiredField","JSON","stringify","isActive","i","push","modalTerms","btn1","btn2","span","onclick","HTMLContent","getUserTerms","template","toString","validatePassword","passwordConfirm","helperText","charLength","lowercase","uppercase","special","match","pattern","length","regex","test","patternTest","hasClass","addClass","removeClass","el","className","add","remove","replace","RegExp","split","join","userFirstName","userLastName","togglePassword","togglePassword1","togglePassword2","type","getAttribute","setAttribute","toggle","wantedId","keys","Object","str","startsWith","obj","parse","entries","key","$","keyup","val","siblings","switchClass","each","seconds","x","setInterval","clearInterval","t","n","exports","module","define","TypeError","o","enumerable","configurable","writable","defineProperty","s","prototype","create","constructor","r","setPrototypeOf","getPrototypeOf","__proto__","a","ReferenceError","c","l","arguments","createElement","toLowerCase","concat","forEach","appendChild","createTextNode","u","options","useInnerHTML","animation","port","createBase","click","close","container","body","beforeRender","afterRender","requestAnimationFrame","cancelAnimationFrame","opacity","parentElement","removeChild","afterClose","beforeClose","destroy","h","call","injectTemplate","render","p","submitText","placeholderText","keyCode","input","placeholder","handleInput","d","buttonCancel","buttonConfirm","onCancel","onConfirm","Alert","Confirm","Prompt","version","FiledataService","fetch","json","httpOptions","httpOptions3","httpOptions2","url","GatewayMiFirma","GatewayService","publicIP","customerId","parseInt","termsId","method","headers","name","lastname","mobile","phonenumber","userAgent","tablet","desktop","camera","secondcamera","fingerprint","processCode","deviceInfo","publicIp","hasCamera","hasSecondaryCamera","hasFingerprintReader","guid","ids","slice","pass","newPassword","file","fileName","fileExtension","path","activator","SessionService","noob","clear","Uint8ArrayToStringBase64","binary","len","byteLength","String","fromCharCode","stringToUint","src","atob","bytes","Uint8Array","charCodeAt","logout","router","navigateByUrl","getExtensionImageFromURI","base64","substr","Error","indexOf","semicolon","uri","extension","b64toBlob","dataURI","byteString","ab","ArrayBuffer","ia","Blob","getHexColorFromRgba","color","datosMaquina","unknown","nVer","navigator","appVersion","nAgt","appName","parseFloat","majorVersion","nameOffset","verOffset","ix","substring","lastIndexOf","toUpperCase","isNaN","clientStrings","cs","osVersion","exec","jscd","browserVersion","browserMajorVersion","detectWebcam","mediaDevices","Promise","resolve","reject","enumerateDevices","devices","some","device","kind"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA,iBAAiB,qBAAuB,wB;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wB;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAxC;;;;AAKA;AACA;AACA;AACA;CAIA;;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,eAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,iBAAJ;AACA,IAAIC,cAAc,GAAG,KAArB;AACA,IAAIC,YAAY,GAAG,KAAnB;AACA,IAAIC,SAAS,GAAG,KAAhB;AACA,IAAIC,OAAO,GAAG,CAAd;AACA,IAAIC,aAAa,GAAG,KAApB;AACA,IAAMC,IAAI,GAAG;AACXC,OAAK,EAAE,EADI;AAEXC,UAAQ,EAAE;AAFC,CAAb;AAKAC,MAAM,CAACC,OAAP,CAAe,UAAAC,IAAI,EAAI;AACrBN,eAAa,GAAIO,YAAY,CAACC,OAAb,CAAqB,eAArB,KAAyC,MAA1D,CADqB,CAErB;;AACA,MAAGZ,cAAH,EAAkB;AAChBa,WAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AAEDD,SAAO,CAACC,GAAR,CAAYH,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAZ;AACAC,SAAO,CAACC,GAAR,CAAYH,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ,EARqB,CASrB;;AACA,MAAIF,IAAI,CAACK,IAAL,KAAcP,MAAM,CAACQ,QAAP,CAAgBC,IAAlC,EAAwC;AACtCC,kBAAc;AACdC,0DAAA,GAAqBC,IAArB,CAA0B,UAACC,KAAD,EAAW;AACnC1B,gBAAU,GAAG0B,KAAb;AACD,KAFD;AAGAC,yEAAe,CAACC,KAAhB,GAAwBH,IAAxB,CAA6B,UAACI,SAAD,EAAe;AAC1C5B,YAAM,GAAG4B,SAAS,CAACC,EAAnB;AACAZ,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAYlB,MAAZ;AACD,KAJD,WAIS,YAAM;AACbA,YAAM,GAAG,WAAT;AACD,KAND,EAMGwB,IANH,CAMQ,YAAK;AACXT,kBAAY,CAACe,OAAb,CAAqB,QAArB,EAA+B9B,MAA/B,EADW,CAEX;;AACA,UAAGe,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,IAAjC,IAAyCD,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAA1E,IAAiF,CAACR,aAArF,EAAoG;AAClGC,YAAI,CAACC,KAAL,GAAaK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;AACAe,gBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCP,KAAjC,GAAyCV,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAzC;AACAe,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAArC,GAA6CV,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA7C;AACAe,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4CV,YAAY,CAACC,OAAb,CAAqB,UAArB,CAA5C;AACAe,gBAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CP,KAA1C,GAAkDV,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAlD;AACAe,gBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,UAAxC,GAAqD,MAArD;AACAH,gBAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CG,SAA3C,GAAuD,0BAAvD;;AAPkG,mDAQ9EJ,QAAQ,CAACK,sBAAT,CAAgC,cAAhC,CAR8E;AAAA;;AAAA;AAQlG,8DAAoE;AAAA,gBAA3DC,OAA2D;AAClEA,mBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,MAAtB;AACF;AAVkG;AAAA;AAAA;AAAA;AAAA;;AAWlGC,kBAAU;AAEVC,eAAO;AACPC,cAAM;AACP,OAlBU,CAmBX;;AACD,KA1BD;AA8BAV,YAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CK,OAA9C,GAAwD,MAAxD;AACAP,YAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,MAApD;AACAP,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCU,OAAvC,GAAiDF,OAAjD;AACAT,YAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CU,OAA1C,GAAoDF,OAApD;AACAT,YAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCW,QAAtC,GAAiDC,QAAjD;AAED;AACF,CApDD;;AAuDA,SAASJ,OAAT,CAAiBK,KAAjB,EAAwB;AACtB,MAAGA,KAAK,KAAKC,SAAb,EAAuB;AACrBD,SAAK,CAACE,cAAN;AADqB,wBAECF,KAAK,CAACG,MAFP;AAAA,QAEbC,EAFa,iBAEbA,EAFa;AAAA,QAETxB,KAFS,iBAETA,KAFS;AAGrBhB,QAAI,CAACwC,EAAD,CAAJ,GAAWxB,KAAX;AACD;;AACDR,SAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AAED,SAAS0B,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,MAAGA,KAAK,KAAKC,SAAb,EAAuB;AACvBD,SAAK,CAACE,cAAN;AACC;;AACDhB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,OAAtD;;AAEA,MAAIvB,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAAjC,IAAwCD,YAAY,CAACC,OAAb,CAAqB,QAArB,MAAmC,GAA/E,EAAoF;AAClF;AACAC,WAAO,CAACC,GAAR,CAAY,yBAAZ;AACAH,gBAAY,CAACe,OAAb,CAAqB,QAArB,EAA+B,GAA/B;AACArB,QAAI,CAACC,KAAL,GAAaK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;AACAkC,iBAAa;AACbnB,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACA;AACD;;AAED,MAAMa,OAAO,GAAGpB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAhB;;AACA,MAAGmB,OAAO,CAAC1B,KAAR,KAAkB,EAArB,EAAwB;AACtBhB,QAAI,CAACE,QAAL,GAAgBwC,OAAO,CAAC1B,KAAxB;AACD;;AAED,MAAIhB,IAAI,CAACE,QAAL,KAAkB,EAAtB,EAA0B;AACxBM,WAAO,CAACC,GAAR,CAAY,WAAZ;AACAgC,iBAAa,GAFW,CAGxB;;AACA;AACD;;AACDT,QAAM,GA3BiB,CA4BvB;AACD;;AAED,SAASnB,cAAT,GAA0B;AACxBxB,iBAAe,GAAGsD,MAAM,CAACC,QAAP,CAAgBC,IAAhB,KAAyB,yBAA3C;AACD;;AAED,SAASb,MAAT,GAAkB;AAChBlC,SAAO;AACPU,SAAO,CAACC,GAAR,qBAAyBX,OAAzB;AACAwB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,OAAtD;;AAIA,MAAI7B,IAAI,CAACE,QAAL,KAAkB,EAAtB,EAA0B;AACxBuC,iBAAa,GADW,CAExB;;AACA;AACD;;AACD,MAAIzC,IAAI,CAACC,KAAL,KAAe,EAAf,IAAqBD,IAAI,CAACE,QAAL,KAAkB,EAA3C,EAA+C;AAC7C4C,oBAAgB;AAChB;AACD;;AAED,MAAGjD,SAAH,EAAc;AACZW,WAAO,CAACC,GAAR,4CAAgDsC,oEAAc,CAACC,MAA/D,kBAA6EhD,IAAI,CAACE,QAAlF;AACD,GAFD,MAEO;AACLM,WAAO,CAACC,GAAR,8DAAkEsC,oEAAc,CAACC,MAAjF;AACD;;AAEDC,sEAAc,CAACC,QAAf,CAAwBH,oEAAc,CAACC,MAAvC,EAA+ChD,IAAI,CAACE,QAApD,EACGa,IADH,CACQ,UAACI,SAAD,EAAe;AACnB,QAAIA,SAAS,CAACnB,IAAV,CAAemD,GAAnB,EAAwB;AACtB,UAAIC,aAAa,GAAGjC,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBC,UAAxB,CAAmCC,KAAvD;;AACA,UAAG,OAAOH,aAAP,KAAyB,WAA5B,EAAwC;AACtC9C,oBAAY,CAACe,OAAb,CAAqB,OAArB,EAA8B+B,aAA9B;AACAT,cAAM,CAACa,QAAP,CAAgB,IAAhB,EAAsB,GAAtB;AACAb,cAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,iBAAvB,CAHsC,CAItC;AACD,OALD,MAKO;AACLvB,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,YAAI4B,mDAAJ,CAAoB;AAClBC,eAAK,EAAE,qBADW;AAElBC,iBAAO,EAAE;AAFS,SAApB;AAID,OAbqB,CAetB;AACA;;AACD,KAjBD,MAiBO;AACLC,eAAS;AACTtC,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACAP,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDK,OAAhD,GAA0D,OAA1D;AACAP,cAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CqC,WAA1C,GAAwD,QAAxD;AACA,UAAIJ,mDAAJ,CAAoB;AAClBC,aAAK,EAAE,wBADW;AAElBC,eAAO,EAAE;AAFS,OAApB,EALK,CASL;AACD;AACF,GA9BH,WA8BW,UAACG,QAAD,EAAc;AACrBtD,WAAO,CAACC,GAAR,CAAYqD,QAAZ;;AACA,QAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvD1C,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDK,OAAhD,GAA0D,OAA1D;AACAP,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDqC,WAAhD,GAA8D,QAA9D;AACAvC,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0C0C,WAA1C,GAAuD,sGAAvD;AACAzD,aAAO,CAACC,GAAR,CAAY,sGAAZ,EAJuD,CAKvD;AACD,KAND,MAMO,CACL;AACD;AACF,GAzCH;AA0CD;;AAED,SAASmD,SAAT,GAAqB;AACnB5D,MAAI,CAACE,QAAL,GAAgB,EAAhB;AACD;AAED;;;;;AAGA,SAASuC,aAAT,GAAyB;AACvBzC,MAAI,CAACC,KAAL,GAAaqB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCP,KAA9C;;AACA,MAAIhB,IAAI,CAACC,KAAL,KAAe,EAAnB,EAAuB;AACrB6C,oBAAgB;AAChB;AACD;;AAED,MAAMoB,QAAQ,GAAGvB,MAAM,CAACwB,UAAP,IAAqB,GAAtC;AACA,MAAMC,QAAQ,GAAG,CAACF,QAAD,IAAavB,MAAM,CAACwB,UAAP,IAAqB,GAAnD;AACA,MAAME,SAAS,GAAG,CAACH,QAAD,IAAa,CAACE,QAAhC;AAEA,MAAME,UAAU,GAAGxD,sDAAA,CAAmB6B,MAAnB,CAAnB;AAEAnC,SAAO,CAACC,GAAR,CAAY,eAAZ;;AACA,MAAGZ,SAAH,EAAa;AACXW,WAAO,CAACC,GAAR,CAAY,oBAAZ;AACD;;AACDwC,sEAAc,CAACsB,YAAf,CACEvE,IAAI,CAACC,KADP,EAEE,EAFF,EAGEV,MAHF,EAIE+E,UAAU,CAACE,OAJb,EAKE,EALF,EAMEF,UAAU,CAACG,EANb,EAOEP,QAPF,EAQEE,QARF,EASEC,SATF,EAUE/E,UAVF,EAWE,KAXF,EAYE,KAZF,EAaEyB,IAbF,CAaO,UAACI,SAAD,EAAe;AACpB,QAAIA,SAAS,CAACnB,IAAV,CAAe0E,UAAnB,EAA+B;AAC7BlE,aAAO,CAACC,GAAR,CAAY,wBAAZ;AACAkE,WAAK,CAACxD,SAAD,CAAL;AACD,KAHD,MAGO;AACL;AACA,UAAMyD,SAAS,GAAGtD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAMC,SAAS,GAAGxD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAME,SAAS,GAAGzD,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACA,UAAMG,SAAS,GAAG1D,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAlB;AACAvD,cAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiC0D,UAAjC,CAA4CC,YAA5C,CAAyDN,SAAzD;AACAtD,cAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiC0D,UAAjC,CAA4CC,YAA5C,CAAyDJ,SAAzD;AACAxD,cAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0C0D,UAA1C,CAAqDC,YAArD,CAAkEH,SAAlE;AACAzD,cAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DF,SAA7D;AACA1E,kBAAY,CAACe,OAAb,CAAqB,QAArB,EAA+BF,SAAS,CAACnB,IAAV,CAAegD,MAA9C;AACAxD,UAAI;AACJgB,aAAO,CAACC,GAAR,CAAY,kCAAZ;;AACA,UAAIH,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0CZ,cAA9C,EAA6D;AAC3Da,eAAO,CAACC,GAAR,CAAY,4BAAZ;AACD,OAFD,MAEO;AACLD,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACD;;AACDD,aAAO,CAACC,GAAR,CAAYjB,IAAZ,EAlBK,CAmBL;;AAnBK,kDAoBe8B,QAAQ,CAACK,sBAAT,CAAgC,aAAhC,CApBf;AAAA;;AAAA;AAoBL,+DAAmE;AAAA,cAA1DC,OAA0D;AACjEA,iBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,OAAtB;AACF;AAtBK;AAAA;AAAA;AAAA;AAAA;;AAuBL,UAAIsD,aAAJ;AACAxF,oBAAc,GAAIW,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,MAA5D;;AACA,UAAIZ,cAAc,IAAI,CAACI,aAAvB,EAAqC;AACnCoF,qBAAa,GAAGC,eAAe,EAA/B;AACA5E,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACA4E,qBAAa,GAHsB,CAGlB;AAClB,OAJD,MAIO;AACL7E,eAAO,CAACC,GAAR,CAAY,+BAAZ;AACAH,oBAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BrB,IAAI,CAACC,KAAlC;AACAqB,gBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,UAAxC,GAAqD,MAArD;AACAH,gBAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CG,SAA3C,GAAuD,0BAAvD;AACA,YAAM4D,IAAI,GAAGhE,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAb;AACA,YAAMU,IAAI,GAAGjE,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAb;AACAvD,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DI,IAA7D;AACAhE,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC0D,UAArC,CAAgDC,YAAhD,CAA6DK,IAA7D,EARK,CAUL;AACD;;AACD/E,aAAO,CAACC,GAAR,oBAAwB0E,aAAxB;;AAEA,UAAG3F,IAAI,GAAC,CAAR,EAAU;AAERgB,eAAO,CAACC,GAAR,sBAA0BjB,IAA1B,GAFQ,CAGR;;AACA,YAAIgG,KAAK,GAAGlE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAZ;AACA,YAAIkE,KAAK,GAAGnE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAZ;AACA,YAAImE,OAAO,GAAGF,KAAK,CAACG,SAAN,CAAgBC,QAAhB,CAAyB,OAAzB,CAAd;AACApF,eAAO,CAACC,GAAR,oBAAwBiF,OAAxB;;AACA,YAAI,CAACA,OAAD,IAAY,CAAC/F,cAAjB,EAAgC;AAC9B2B,kBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA;AACD;;AACD,YAAGlC,cAAc,IAAI,CAACE,SAAtB,EAAgC;AAC9BgG,uBAAa;AACd,SAFD,MAEO,IAAI9F,aAAa,IAAI,CAACF,SAAtB,EAAgC;AACrCgG,uBAAa;AACd;AACF;;AAED,UAAG,CAACjG,YAAD,IAAiBJ,IAAI,GAAC,CAAzB,EAA2B;AACzB;AACD,OAhEI,CAkEL;;;AACA8B,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AAEAP,cAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CK,OAA5C,GAAsD,OAAtD,CArEK,CAuEL;;AAEA;;;;AAIA;AACD;AACF,GAhGD,WAgGS,UAACiC,QAAD,EAAc;AACrBtD,WAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BqD,QAA1B;;AACA,QAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvD,UAAIP,mDAAJ,CAAoB;AAClBC,aAAK,EAAE,wBADW;AAElBC,eAAO,EAAE;AAFS,OAApB,EADuD,CAKvD;AACD,KAND,MAMO,CACL;AACD;AACF,GA3GD;AA4GD;;AAED,SAAS0B,aAAT,GAAwB;AACtB,MAAIG,KAAK,GAAGlE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AAAA,MACEkE,KAAK,GAAGnE,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CADV;AAAA,MAEEuE,SAAS,GAAGxE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAFd;AAAA,MAGEwE,SAAS,GAAGzE,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAHd;AAIEiE,OAAK,CAAChE,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACA4D,OAAK,CAACjE,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAP,UAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCyE,QAAjC,GAA4C,IAA5C;AACAF,WAAS,CAAC9E,KAAV,GAAkBV,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAlB;AACAwF,WAAS,CAAC/E,KAAV,GAAkB8E,SAAS,CAAC9E,KAA5B;AACH;;AAED,SAAS6E,aAAT,GAAwB;AACtBvE,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACArB,SAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,SAAO,CAACC,GAAR,CAAYa,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjD;AACAM,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAoB,sEAAc,CAACgD,cAAf,CACElD,oEAAc,CAACmD,SADjB,EAEEnD,oEAAc,CAACoD,QAFjB,EAGE7E,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAHvC,EAIE+B,oEAAc,CAACqD,IAJjB,EAKErD,oEAAc,CAACsD,cALjB,EAMEtD,oEAAc,CAACxD,MANjB,EAOIwB,IAPJ,CAOS,UAACuF,SAAD,EAAe;AACpB,QAAGA,SAAS,CAACC,MAAV,KAAqB,SAArB,IAAkCD,SAAS,CAACtC,UAAV,KAAyB,GAA9D,EAAkE;AAChExD,aAAO,CAACC,GAAR,CAAY6F,SAAS,CAACE,OAAtB;AACAlG,kBAAY,CAACe,OAAb,CAAqB,YAArB,EAAmCiF,SAAS,CAACtG,IAAV,CAAeyG,UAAlD;AACAC,sBAAgB;AACjB,KAJD,MAIO;AACLlG,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAY6F,SAAZ;AACA;AACD;AAEJ,GAlBD,EALsB,CAwBxB;AACA;AAEC;;AAED,SAASI,gBAAT,GAA4B;AAC1BpF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAoB,sEAAc,CAACC,QAAf,CACEH,oEAAc,CAACC,MADjB,EAEE,EAFF,EAGIjC,IAHJ,CAGS,UAACuF,SAAD,EAAc;AAEnB,QAAIA,SAAS,CAACtG,IAAV,CAAemD,GAAf,IAAsBmD,SAAS,CAACtG,IAAV,CAAeqD,QAAf,CAAwBsD,OAAxB,KAAoC,KAA9D,EAAqE;AACnEC,oBAAc;AACf,KAFD,MAEO;AACLpG,aAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,aAAO,CAACC,GAAR,CAAY6F,SAAZ;AACA;AACD;AACJ,GAZD;AAaD;;AAED,SAASM,cAAT,GAAyB;AACvBC,UAAQ;AACRvF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAMiF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd,CAHuB,CAIvB;;AACAD,UAAQ,CAACyF,aAAT,CAAuB,WAAvB,EAAoCvF,KAApC,CAA0CwF,QAA1C,GAAqD,QAArD;AACAF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACA,MAAMoF,IAAI,GAAG3F,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb;AACA,MAAM2F,WAAW,GAAG5G,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApB;AACA,MAAM4G,UAAU,GAAG7F,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;AACA4F,YAAU,CAACC,gBAAX,CAA4B,OAA5B,EAAqC,YAAW;AAC9C9F,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,QAAMyC,UAAU,GAAGxD,sDAAA,CAAmB6B,MAAnB,CAAnB;AACA,QAAMuB,QAAQ,GAAGvB,MAAM,CAACwB,UAAP,IAAqB,GAAtC;AACA,QAAMC,QAAQ,GAAG,CAACF,QAAD,IAAavB,MAAM,CAACwB,UAAP,IAAqB,GAAnD;AACA,QAAME,SAAS,GAAG,CAACH,QAAD,IAAa,CAACE,QAAhC;AACAnB,wEAAc,CAACsB,YAAf,CACEvE,IAAI,CAACC,KADP,EAEE,EAFF,EAGEV,MAHF,EAIE+E,UAAU,CAACE,OAJb,EAKE,EALF,EAMEF,UAAU,CAACG,EANb,EAOEP,QAPF,EAQEE,QARF,EASEC,SATF,EAUE/E,UAVF,EAWE,KAXF,EAYE,KAZF,EAaE,CAbF,EAcEyD,oEAAc,CAACC,MAdjB,EAeEjC,IAfF,CAeO,UAACI,SAAD,EAAe;AACpB,UAAGA,SAAS,CAAC6C,UAAV,IAAwB,GAA3B,EAA+B;AAC7B6C,gBAAQ;AACRrG,eAAO,CAACC,GAAR,CAAY,yBAAZ;AACAa,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACD;AACF,KArBD,EAN8C,CA4B9C;AACD,GA7BD;AA8BAP,UAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+CwF,WAA/C;AAEAD,MAAI,CAACG,gBAAL,CAAsB,QAAtB,EAAgC,UAAAC,CAAC,EAAI;AACjCA,KAAC,CAAC/E,cAAF;AACA,QAAMgF,GAAG,GAAGhG,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjD;AACAM,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACArB,WAAO,CAACC,GAAR,oBAAwB6G,GAAxB;AACArE,wEAAc,CAACC,QAAf,CACEH,oEAAc,CAACC,MADjB,EAEEsE,GAFF,EAGIvG,IAHJ,CAGS,UAACuF,SAAD,EAAe;AACpB,UAAIA,SAAS,CAACtG,IAAV,CAAemD,GAAnB,EAAwB;AACtB3C,eAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,eAAO,CAACC,GAAR,CAAY6F,SAAZ;AACArD,4EAAc,CAACsE,WAAf,CACExE,oEAAc,CAACxD,MADjB,EAEEwD,oEAAc,CAAC0D,UAFjB,EAGI1F,IAHJ,CAGS,UAACyG,IAAD,EAAU;AACf,cAAIA,IAAI,CAACC,OAAT,EAAiB;AACfC,wBAAY;AACb;AACJ,SAPD;AASD,OAZD,MAYO;AAAE;AACPpG,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CK,OAA3C,GAAqD,OAArD;AACAP,gBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCoG,SAArC,GAA+C,mBAA/C;AACAnH,eAAO,CAACC,GAAR,CAAY6F,SAAZ;AACAM,sBAAc;AACf;AACJ,KAtBD;AAuBH,GA5BD;AA+BD;;AAED,SAASc,YAAT,GAAuB;AACrB,MAAIE,SAAJ;AACA3E,sEAAc,CAACyE,YAAf,CACE3E,oEAAc,CAACmD,SAAf,GAA2B,GAA3B,GAAiCnD,oEAAc,CAACoD,QADlD,EAEEpD,oEAAc,CAACqD,IAFjB,EAGErD,oEAAc,CAACsD,cAHjB,EAIItF,IAJJ,CAIS,UAACyG,IAAD,EAAU;AACf,QAAGA,IAAI,CAACK,WAAL,KAAqB,GAAxB,EAA4B;AAC1B5E,0EAAc,CAAC6E,sBAAf,CACE/E,oEAAc,CAACqD,IADjB,EAEErF,IAFF,CAEO,UAACuF,SAAD,EAAe;AACpB,YAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAAgC;AAC9B4D,mBAAS,GAAGtB,SAAS,CAACE,OAAtB;AACA,cAAMuB,iBAAiB,GAAGhF,oEAAc,CAACqD,IAAf,GAAsB,KAAtB,GAA8BwB,SAAxD;AACA,cAAMI,gBAAgB,GAAGrF,MAAM,CAACsF,IAAP,CAAYF,iBAAZ,CAAzB;AACA9E,8EAAc,CAACiF,eAAf,CACEF,gBADF,EAEIjH,IAFJ,CAES,UAACyG,IAAD,EAAU;AACf,gBAAGA,IAAI,CAACxD,UAAL,IAAmB,GAAtB,EAA0B;AACxBmE,yBAAW;AACZ,aAFD,MAEO;AACLC,8BAAgB;AACjB;AACF,WARH;AASD,SAbD,MAaO;AACLA,0BAAgB;AACjB;AACF,OAnBD;AAoBD,KArBD,MAqBO;AACLA,sBAAgB;AACjB;AACF,GA7BH;AA8BD;;AAED,SAASD,WAAT,GAAuB;AACrBtI,WAAS,GAAG,IAAZ;AACAyB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACAP,UAAQ,CAACyF,aAAT,CAAuB,WAAvB,EAAoCvF,KAApC,CAA0CwF,QAA1C,GAAqD,QAArD;AACA,MAAMF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd,CAJqB,CAKrB;;AACA,MAAM8G,YAAY,GAAG/G,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAArB;AACAuF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAwG,cAAY,CAAC3G,SAAb;AAUAJ,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuC6F,gBAAvC,CAAwD,OAAxD,EAAiE,YAAW;AAE1EpH,QAAI,CAACC,KAAL,GAAa8C,oEAAc,CAACqD,IAA5B;;AACA,QAAIzG,cAAJ,EAAmB;AACjBK,UAAI,CAACE,QAAL,GAAgB6C,oEAAc,CAACuF,SAA/B;AACD,KAFD,MAEO;AACLtI,UAAI,CAACE,QAAL,GAAgBoB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAArD;AACD;;AACDR,WAAO,CAACC,GAAR,mCAAuCT,IAAI,CAACC,KAA5C,gBAAuDD,IAAI,CAACE,QAA5D;AACAuC,iBAAa,GAT6D,CASzD;AAClB,GAVD;AAWD;;AAED,SAAS2F,gBAAT,GAA4B;AAC1BvI,WAAS,GAAG,KAAZ;AACAyB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAMiF,KAAK,GAAGxF,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd;AACA,MAAM8G,YAAY,GAAG/G,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAArB;AACAuF,OAAK,CAACtF,KAAN,CAAYK,OAAZ,GAAsB,MAAtB;AACAwG,cAAY,CAAC3G,SAAb;AAED;;AAED,SAASiD,KAAT,CAAexD,SAAf,EAA0B;AACxBb,cAAY,CAACe,OAAb,CAAqB,eAArB,YACKF,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoB1G,iBADzB,cAC8CyB,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoBmC,gBADlE;AAEAjI,cAAY,CAACe,OAAb,CAAqB,WAArB,EAAkCF,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoBC,cAAtD;AACA/F,cAAY,CAACe,OAAb,CAAqB,QAArB,EAA+BrB,IAAI,CAACC,KAApC;AACAK,cAAY,CAACe,OAAb,CAAqB,WAArB,EAAkCF,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoBK,UAAtD;AACAnG,cAAY,CAACe,OAAb,CAAqB,QAArB,EAA+BF,SAAS,CAACnB,IAAV,CAAegD,MAA9C;AAEAK,UAAQ,CAAClC,SAAD,CAAR;AACD;;AAED,SAASkC,QAAT,CAAkBlC,SAAlB,EAA6B;AAC3BX,SAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,SAAO,CAACC,GAAR,CAAYU,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBsD,OAApC;;AACA,UAAQxF,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBsD,OAAhC;AACE,SAAK,UAAL;AACEnG,aAAO,CAACC,GAAR,CAAY,wBAAZ,EADF,CACwC;;AACtC;;AACF,SAAK,UAAL;AACE+H,kBAAY,CAACrH,SAAD,CAAZ;AACA;;AACF,SAAK,QAAL;AACEsH,oBAAc,CAACC,QAAf,CAAwB,CAAC,cAAD,CAAxB;AACA;;AACF,SAAK,KAAL;AACED,oBAAc,CAACC,QAAf,CAAwB,CAAC,OAAD,CAAxB;AACA;;AACF,SAAK,UAAL;AACE,UAAMC,UAAU,GAAIrI,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,MAA9D;;AACA,UAAGoI,UAAH,EAAe;AACb,YAAIhF,OAAO,GAAGyB,eAAe,EAA7B;AACA5E,eAAO,CAACC,GAAR,CAAYkD,OAAZ;AACArC,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4C+B,oEAAc,CAACuF,SAA3D;AACAtI,YAAI,CAACE,QAAL,GAAgBoB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApD;AACAR,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYT,IAAI,CAACE,QAAjB;AACA8B,cAAM;AACP,OARD,MAQO,IAAGnC,SAAH,EAAc;AACnByB,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApC,GAA4CM,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCP,KAAjF;AACAhB,YAAI,CAACE,QAAL,GAAgBoB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCP,KAApD;AACAR,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYT,IAAI,CAACE,QAAjB;AACA8B,cAAM;AACP,OANM,MAOF;AACH,YAAM4G,aAAa,GAAGtH,QAAQ,CAACuD,eAAT,CAAyB,UAAzB,CAAtB;AACAvD,gBAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCoG,SAAxC,GAAoDrH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApD;AACAe,gBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoC0D,UAApC,CAA+CC,YAA/C,CAA4D0D,aAA5D;AACAtH,gBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsC0C,WAAtC,GAAoD,UAApD;AACA3C,gBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;;AALG,oDAMiBP,QAAQ,CAACK,sBAAT,CAAgC,aAAhC,CANjB;AAAA;;AAAA;AAMH,iEAAmE;AAAA,gBAA1DC,OAA0D;AACjEA,mBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,MAAtB;AACD;AARE;AAAA;AAAA;AAAA;AAAA;;AAAA,oDASiBP,QAAQ,CAACK,sBAAT,CAAgC,cAAhC,CATjB;AAAA;;AAAA;AASH,iEAAoE;AAAA,gBAA3DC,QAA2D;AAClEA,oBAAO,CAACJ,KAAR,CAAcK,OAAd,GAAsB,OAAtB;AACD;AAXE;AAAA;AAAA;AAAA;AAAA;AAYJ;;AACH;AA3CF;AA6CD;;AAED,SAAS2G,YAAT,CAAsBrH,SAAtB,EAAiC;AAC/B,MAAI0H,IAAI,CAACC,SAAL,CAAe3H,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBC,UAAvC,KAAsD,IAA1D,EAAgE;AAC9DL,wEAAc,CAACC,QAAf,CAAwB/B,SAAS,CAACnB,IAAV,CAAegD,MAAvC,EAA+C,EAA/C,EAAmDjC,IAAnD,CAAwD,UAACuF,SAAD,EAAe;AACrE,UAAI,CAACnF,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoB2C,QAAzB,EAAmC,CACjC;AACD,OAFD,MAEO;AACL1F,gBAAQ,CAACiD,SAAD,CAAR;AACD;AACF,KAND,WAMS,UAACxC,QAAD,EAAc;AACrBtD,aAAO,CAACC,GAAR,CAAYqD,QAAZ;;AACA,UAAIA,QAAQ,CAACC,KAAT,IAAkBD,QAAQ,CAACC,KAAT,CAAeC,UAAf,KAA8B,GAApD,EAAyD;AACvDxD,eAAO,CAACC,GAAR,CAAY,0EAAZ;AACD,OAFD,MAEO,CACL;AACD;AACF,KAbD;AAcD,GAfD,MAeO;AACLD,WAAO,CAACC,GAAR,CAAY,mBAAZ;AACAa,YAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACE,QAAI4B,mDAAJ,CAAoB;AAClBC,WAAK,EAAE,wBADW;AAElBC,aAAO,EAAE;AAFS,KAApB;;AAIF,SAAK,IAAIqF,CAAT,IAAc7H,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBC,UAAtC,EAAkD;AAChD7D,WAAK,CAACwJ,IAAN,CAAW,CAAC9H,SAAS,CAACnB,IAAV,CAAeqD,QAAf,CAAwBC,UAAxB,CAAmC0F,CAAnC,CAAZ;AACD;;AACDxI,WAAO,CAACC,GAAR,CAAYhB,KAAZ,EAVK,CAWL;;AACA,QAAI,CAAC0B,SAAS,CAACnB,IAAV,CAAeoG,IAAf,CAAoB2C,QAAzB,EAAmC;AACjCzI,kBAAY,CAACe,OAAb,CAAqB,UAArB,EAAiC,OAAjC;AACD,KAdI,CAeL;;AACD;AACF;;AAED,SAASyB,gBAAT,GAA4B;AAC1BxB,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAI4B,mDAAJ,CAAoB;AACdC,SAAK,EAAE,wBADO;AAEdC,WAAO,EAAE;AAFK,GAApB,EAF0B,CAM1B;AACD;;AAED,IAAIuF,UAAU,GAAG5H,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAjB,C,CAEA;;AACA,IAAI4H,IAAI,GAAG7H,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAX;AACA,IAAI6H,IAAI,GAAG9H,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAX,C,CAEA;;AACA,IAAI8H,IAAI,GAAG/H,QAAQ,CAACK,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,CAAX,C,CAEA;;AACAyH,IAAI,CAACE,OAAL,GAAe,YAAW;AACxBhI,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,MAAI0H,WAAW,GAAG,gBAAlB;AACAtG,sEAAc,CAACuG,YAAf,GAA8BzI,IAA9B,CAAmC,UAACuF,SAAD,EAAe;AAChD,QAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAA+B;AAC7BuF,iBAAW,GAAGjD,SAAS,CAACtG,IAAV,CAAe,CAAf,EAAkByJ,QAAhC;AACAnI,cAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+C6H,WAAW,CAACG,QAAZ,EAA/C,CAF6B,CAG7B;;AACApI,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACD;AACF,GAPD;AAQAqH,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,OAA3B,CAXwB,CAYxB;AACD,CAbD;;AAeAsH,IAAI,CAACG,OAAL,GAAe,YAAW;AACxBhI,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACA,MAAI0H,WAAW,GAAG,gBAAlB;AACAtG,sEAAc,CAACuG,YAAf,GAA8BzI,IAA9B,CAAmC,UAACuF,SAAD,EAAe;AAChD,QAAGA,SAAS,CAACtC,UAAV,IAAwB,GAA3B,EAA+B;AAC7BuF,iBAAW,GAAGjD,SAAS,CAACtG,IAAV,CAAe,CAAf,EAAkByJ,QAAhC;AACAnI,cAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCG,SAAnC,GAA+C6H,WAAW,CAACG,QAAZ,EAA/C,CAF6B,CAG7B;;AACApI,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAsD,MAAtD;AACD;AACF,GAPD;AAQAqH,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,OAA3B,CAXwB,CAYxB;AACD,CAbD,C,CAeA;;;AACAwH,IAAI,CAACC,OAAL,GAAe,YAAW;AACxBJ,YAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,MAA3B;AACD,CAFD,C,CAIA;;;AACAc,MAAM,CAAC2G,OAAP,GAAiB,UAASlH,KAAT,EAAgB;AAC/B,MAAIA,KAAK,CAACG,MAAN,IAAgB2G,UAApB,EAAiC;AAC/BA,cAAU,CAAC1H,KAAX,CAAiBK,OAAjB,GAA2B,MAA3B;AACD;AACF,CAJD;AAMA;;;AACAP,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC6F,gBAArC,CAAsD,OAAtD,EAA+DuC,gBAA/D;AACArI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqC6F,gBAArC,CAAsD,UAAtD,EAAkE,YAAK;AACnE9F,UAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDK,OAAlD,GAA4D,MAA5D;AACH,CAFD;;AAIA,SAAS8H,gBAAT,GAA2B;AACvBrI,UAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDK,OAAlD,GAA4D,OAA5D;AACH;;AAGD,CAAC,YAAU;AACT,MAAI3B,QAAQ,GAAGoB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAf;AACF,MAAIqI,eAAe,GAAGtI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAtB;AAEE,MAAIsI,UAAU,GAAG;AACbC,cAAU,EAAExI,QAAQ,CAACyF,aAAT,CAAuB,sBAAvB,CADC;AAEbgD,aAAS,EAAEzI,QAAQ,CAACyF,aAAT,CAAuB,yBAAvB,CAFE;AAGbiD,aAAS,EAAE1I,QAAQ,CAACyF,aAAT,CAAuB,yBAAvB,CAHE;AAIbkD,WAAO,EAAE3I,QAAQ,CAACyF,aAAT,CAAuB,uBAAvB,CAJI;AAKfmD,SAAK,EAAE5I,QAAQ,CAACyF,aAAT,CAAuB,qBAAvB;AALQ,GAAjB;AAQA,MAAIoD,OAAO,GAAG;AACVL,cAAU,EAAE,sBAAW;AACnB,UAAI5J,QAAQ,CAACc,KAAT,CAAeoJ,MAAf,IAAyB,CAA7B,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KALS;AAMVL,aAAS,EAAE,qBAAW;AAClB,UAAIM,KAAK,GAAG,iBAAZ,CADkB,CACa;;AAE/B,UAAIA,KAAK,CAACC,IAAN,CAAWpK,QAAQ,CAACc,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KAZS;AAaVgJ,aAAS,EAAE,qBAAW;AAClB,UAAIK,KAAK,GAAG,iBAAZ,CADkB,CACa;;AAE/B,UAAIA,KAAK,CAACC,IAAN,CAAWpK,QAAQ,CAACc,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KAnBS;AAoBViJ,WAAO,EAAE,mBAAW;AAChB,UAAII,KAAK,GAAG,oBAAZ,CADgB,CACkB;;AAElC,UAAIA,KAAK,CAACC,IAAN,CAAWpK,QAAQ,CAACc,KAApB,CAAJ,EAAiC;AAC7B,eAAO,IAAP;AACH;AACJ,KA1BS;AA2BZkJ,SAAK,EAAE,iBAAW;AACZ,UAAIhK,QAAQ,CAACc,KAAT,IAAkB4I,eAAe,CAAC5I,KAAtC,EAA8C;AAC1C,eAAO,IAAP;AACH;AACJ;AA/BS,GAAd,CAZS,CA8CT;;AACFd,UAAQ,CAACkH,gBAAT,CAA0B,OAA1B,EAAmC,YAAW;AACxC;AACAmD,eAAW,CAAEJ,OAAO,CAACL,UAAR,EAAF,EAAwBD,UAAU,CAACC,UAAnC,CAAX,CAFwC,CAIxC;;AACAS,eAAW,CAAEJ,OAAO,CAACJ,SAAR,EAAF,EAAuBF,UAAU,CAACE,SAAlC,CAAX,CALwC,CAOxC;;AACAQ,eAAW,CAAEJ,OAAO,CAACH,SAAR,EAAF,EAAuBH,UAAU,CAACG,SAAlC,CAAX,CARwC,CAUxC;;AACAO,eAAW,CAAEJ,OAAO,CAACF,OAAR,EAAF,EAAqBJ,UAAU,CAACI,OAAhC,CAAX,CAXwC,CAY5C;;AACIM,eAAW,CAAEJ,OAAO,CAACD,KAAR,EAAF,EAAmBL,UAAU,CAACK,KAA9B,CAAX,CAbwC,CAe5C;;AACA,QAAIM,QAAQ,CAACX,UAAU,CAACC,UAAZ,EAAwB,OAAxB,CAAR,IACMU,QAAQ,CAACX,UAAU,CAACE,SAAZ,EAAuB,OAAvB,CADd,IAEMS,QAAQ,CAACX,UAAU,CAACG,SAAZ,EAAuB,OAAvB,CAFd,IAGMQ,QAAQ,CAACX,UAAU,CAACI,OAAZ,EAAqB,OAArB,CAHd,IAIMO,QAAQ,CAACX,UAAU,CAACK,KAAZ,EAAmB,OAAnB,CAJlB,EAKM;AACEO,cAAQ,CAACvK,QAAD,EAAW,OAAX,CAAR;AACAuK,cAAQ,CAACb,eAAD,EAAkB,OAAlB,CAAR;AACAc,iBAAW,CAACxK,QAAD,EAAW,SAAX,CAAX;AACAwK,iBAAW,CAACd,eAAD,EAAkB,SAAlB,CAAX;AACP,KAVD,MAWK;AACHc,iBAAW,CAACxK,QAAD,EAAW,OAAX,CAAX;AACAwK,iBAAW,CAACd,eAAD,EAAkB,OAAlB,CAAX;AACAa,cAAQ,CAACvK,QAAD,EAAW,SAAX,CAAR;AACAuK,cAAQ,CAACb,eAAD,EAAkB,SAAlB,CAAR;AACD;AACA,GAjCH;AAmCAA,iBAAe,CAACxC,gBAAhB,CAAiC,OAAjC,EAA0C,YAAW;AAC/C;AACAmD,eAAW,CAAEJ,OAAO,CAACL,UAAR,EAAF,EAAwBD,UAAU,CAACC,UAAnC,CAAX,CAF+C,CAI/C;;AACAS,eAAW,CAAEJ,OAAO,CAACJ,SAAR,EAAF,EAAuBF,UAAU,CAACE,SAAlC,CAAX,CAL+C,CAO/C;;AACAQ,eAAW,CAAEJ,OAAO,CAACH,SAAR,EAAF,EAAuBH,UAAU,CAACG,SAAlC,CAAX,CAR+C,CAU/C;;AACAO,eAAW,CAAEJ,OAAO,CAACF,OAAR,EAAF,EAAqBJ,UAAU,CAACI,OAAhC,CAAX,CAX+C,CAYnD;;AACIM,eAAW,CAAEJ,OAAO,CAACD,KAAR,EAAF,EAAmBL,UAAU,CAACK,KAA9B,CAAX,CAb+C,CAenD;;AACA,QAAIM,QAAQ,CAACX,UAAU,CAACC,UAAZ,EAAwB,OAAxB,CAAR,IACMU,QAAQ,CAACX,UAAU,CAACE,SAAZ,EAAuB,OAAvB,CADd,IAEMS,QAAQ,CAACX,UAAU,CAACG,SAAZ,EAAuB,OAAvB,CAFd,IAGMQ,QAAQ,CAACX,UAAU,CAACI,OAAZ,EAAqB,OAArB,CAHd,IAIMO,QAAQ,CAACX,UAAU,CAACK,KAAZ,EAAmB,OAAnB,CAJlB,EAKM;AACEO,cAAQ,CAACvK,QAAD,EAAW,OAAX,CAAR;AACAuK,cAAQ,CAACb,eAAD,EAAkB,OAAlB,CAAR;AACAc,iBAAW,CAACxK,QAAD,EAAW,SAAX,CAAX;AACAwK,iBAAW,CAACd,eAAD,EAAkB,SAAlB,CAAX;AACP,KAVD,MAWK;AACHc,iBAAW,CAACxK,QAAD,EAAW,OAAX,CAAX;AACAwK,iBAAW,CAACd,eAAD,EAAkB,OAAlB,CAAX;AACAa,cAAQ,CAACvK,QAAD,EAAW,SAAX,CAAR;AACAuK,cAAQ,CAACb,eAAD,EAAkB,SAAlB,CAAR;AACD;AACA,GAjCH;;AAmCE,WAASW,WAAT,CAAqBJ,OAArB,EAA8BrG,QAA9B,EAAwC;AACpC,QAAGqG,OAAH,EAAY;AACdM,cAAQ,CAAC3G,QAAD,EAAW,OAAX,CAAR;AACA4G,iBAAW,CAAC5G,QAAD,EAAW,SAAX,CAAX;AACD,KAHG,MAIC;AACH4G,iBAAW,CAAC5G,QAAD,EAAW,OAAX,CAAX;AACA2G,cAAQ,CAAC3G,QAAD,EAAW,SAAX,CAAR;AACD;AACA;;AAED,WAAS2G,QAAT,CAAkBE,EAAlB,EAAsBC,SAAtB,EAAiC;AAC7B,QAAID,EAAE,CAAChF,SAAP,EAAkB;AACdgF,QAAE,CAAChF,SAAH,CAAakF,GAAb,CAAiBD,SAAjB;AACH,KAFD,MAGK;AACDD,QAAE,CAACC,SAAH,IAAgB,MAAMA,SAAtB;AACH;AACJ;;AAED,WAASF,WAAT,CAAqBC,EAArB,EAAyBC,SAAzB,EAAoC;AAChC,QAAID,EAAE,CAAChF,SAAP,EACQgF,EAAE,CAAChF,SAAH,CAAamF,MAAb,CAAoBF,SAApB,EADR,KAGQD,EAAE,CAACC,SAAH,GAAeD,EAAE,CAACC,SAAH,CAAaG,OAAb,CAAqB,IAAIC,MAAJ,CAAW,YAAYJ,SAAS,CAACK,KAAV,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,GAA1B,CAAZ,GAA6C,SAAxD,EAAmE,IAAnE,CAArB,EAA+F,GAA/F,CAAf;AACX;;AAED,WAASV,QAAT,CAAkBG,EAAlB,EAAsBC,SAAtB,EAAiC;AAC7B,QAAID,EAAE,CAAChF,SAAP,EAAkB;AACd,aAAOgF,EAAE,CAAChF,SAAH,CAAaC,QAAb,CAAsBgF,SAAtB,CAAP;AACH,KAFD,MAGK;AACD,UAAII,MAAJ,CAAW,UAAUJ,SAAV,GAAsB,OAAjC,EAA0C,IAA1C,EAAgDN,IAAhD,CAAqDK,EAAE,CAACC,SAAxD;AACH;AACJ;AAEF,CAzJD;AA0JA;;;AAEA,IAAMO,aAAa,GAAG7J,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAtB;AACA,IAAMqE,YAAY,GAAG9J,QAAQ,CAACyF,aAAT,CAAuB,WAAvB,CAArB;AACA,IAAMV,cAAc,GAAG/E,QAAQ,CAACyF,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMsE,cAAc,GAAG/J,QAAQ,CAACyF,aAAT,CAAuB,iBAAvB,CAAvB;AACA,IAAMuE,eAAe,GAAGhK,QAAQ,CAACyF,aAAT,CAAuB,kBAAvB,CAAxB;AACA,IAAMwE,eAAe,GAAGjK,QAAQ,CAACyF,aAAT,CAAuB,kBAAvB,CAAxB;AACA,IAAM7G,QAAQ,GAAGoB,QAAQ,CAACyF,aAAT,CAAuB,WAAvB,CAAjB;AACA,IAAMjB,SAAS,GAAGxE,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAlB;AACA,IAAMhB,SAAS,GAAGzE,QAAQ,CAACyF,aAAT,CAAuB,YAAvB,CAAlB;AAEAoE,aAAa,CAAC/D,gBAAd,CAA+B,OAA/B,EAAwC,YAAW;AACjD9G,cAAY,CAACe,OAAb,CAAqB,WAArB,EAAkC8J,aAAa,CAACnK,KAAhD;AACD,CAFD;AAIAoK,YAAY,CAAChE,gBAAb,CAA8B,OAA9B,EAAuC,YAAW;AAChD9G,cAAY,CAACe,OAAb,CAAqB,UAArB,EAAiC+J,YAAY,CAACpK,KAA9C;AACD,CAFD;AAIAqF,cAAc,CAACe,gBAAf,CAAgC,OAAhC,EAAyC,YAAW;AAClD9G,cAAY,CAACe,OAAb,CAAqB,gBAArB,EAAuCgF,cAAc,CAACrF,KAAtD;AACD,CAFD;AAIAqK,cAAc,CAACjE,gBAAf,CAAgC,OAAhC,EAAyC,UAAUC,CAAV,EAAa;AAClD;AACA,MAAMmE,IAAI,GAAGtL,QAAQ,CAACuL,YAAT,CAAsB,MAAtB,MAAkC,UAAlC,GAA+C,MAA/C,GAAwD,UAArE;AACAvL,UAAQ,CAACwL,YAAT,CAAsB,MAAtB,EAA8BF,IAA9B,EAHkD,CAIlD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND;AAOAL,eAAe,CAAClE,gBAAhB,CAAiC,OAAjC,EAA0C,UAAUC,CAAV,EAAa;AACnD;AACA,MAAMmE,IAAI,GAAG1F,SAAS,CAAC2F,YAAV,CAAuB,MAAvB,MAAmC,UAAnC,GAAgD,MAAhD,GAAyD,UAAtE;AACA3F,WAAS,CAAC4F,YAAV,CAAuB,MAAvB,EAA+BF,IAA/B,EAHmD,CAInD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND;AAOAJ,eAAe,CAACnE,gBAAhB,CAAiC,OAAjC,EAA0C,UAAUC,CAAV,EAAa;AACnD;AACA,MAAMmE,IAAI,GAAGzF,SAAS,CAAC0F,YAAV,CAAuB,MAAvB,MAAmC,UAAnC,GAAgD,MAAhD,GAAyD,UAAtE;AACA1F,WAAS,CAAC2F,YAAV,CAAuB,MAAvB,EAA+BF,IAA/B,EAHmD,CAInD;;AACA,OAAK7F,SAAL,CAAegG,MAAf,CAAsB,cAAtB;AACH,CAND,E,CAOA;;AAEA,SAASvG,eAAT,GAA2B;AACzB,MAAIwG,QAAQ,GAAG,CAAf;AACA,MAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYvL,YAAZ,CAAX;AAAA,MACI0I,CAAC,GAAG6C,IAAI,CAACzB,MADb;;AAEA,SAAQpB,CAAC,EAAT,EAAc;AACV,QAAI+C,GAAG,GAAGF,IAAI,CAAC7C,CAAD,CAAd;;AACA,QAAG+C,GAAG,CAACC,UAAJ,CAAe,GAAf,CAAH,EAAuB;AACrB,UAAIC,GAAG,GAAGpD,IAAI,CAACqD,KAAL,CAAWH,GAAX,CAAV,CADqB,CAErB;;AACA,yCAAyBD,MAAM,CAACK,OAAP,CAAeF,GAAf,CAAzB,qCAA8C;AAAA;AAAA,YAApCG,GAAoC;AAAA,YAA/BpL,KAA+B;;AAC5CV,oBAAY,CAACe,OAAb,CAAqB+K,GAArB,EAA0BpL,KAA1B;;AACA,YAAGoL,GAAG,KAAK,uBAAX,EAAmC;AACjC5L,iBAAO,CAACC,GAAR,kBAAsB2L,GAAtB,eAA8BpL,KAA9B;AACA4K,kBAAQ,GAAG5K,KAAX;AACArB,wBAAc,GAAG,IAAjB;AACAW,sBAAY,CAACe,OAAb,CAAqB,gBAArB,EAAuC1B,cAAvC;AACD;AACF;AACF;AAEA;;AACL,SAAOiM,QAAP;AACD;;AAGDS,CAAC,CAAE,WAAF,CAAD,CAAiBC,KAAjB,CAAuB,YAAW;AAChC;AACA,MAAGD,CAAC,CAAE,IAAF,CAAD,CAAUE,GAAV,MAAmB,EAAtB,EAAyB;AACzBF,KAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,UAAzC,EAAqD,QAArD,EAA+D,GAA/D,EAAoE,eAApE;AACC,GAFD,MAEO;AACPJ,KAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,QAAzC,EAAmD,UAAnD,EAA+D,GAA/D,EAAoE,eAApE;AACC;AAEA,CARH;;AAWI,SAAS3K,UAAT,GAAsB;AACpBuK,GAAC,CAAE,WAAF,CAAD,CAAiBK,IAAjB,CAAsB,YAAW;AAC/B,QAAGL,CAAC,CAAE,IAAF,CAAD,CAAUE,GAAV,MAAmB,EAAtB,EAAyB;AACvBF,OAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,UAAzC,EAAqD,QAArD,EAA+D,GAA/D,EAAoE,eAApE;AACC,KAFH,MAES;AACPJ,OAAC,CAAE,IAAF,CAAD,CAAUG,QAAV,CAAmB,OAAnB,EAA4BC,WAA5B,CAAyC,QAAzC,EAAmD,UAAnD,EAA+D,GAA/D,EAAoE,eAApE;AACC;AACJ,GAND;AAOD;;AAEL,SAAS5F,QAAT,GAAmB;AACjBvF,UAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,MAAvD;AACA,MAAI8K,OAAO,GAAG,EAAd,CAFiB,CAIjB;;AACA,MAAIC,CAAC,GAAGC,WAAW,CAAC,YAAW;AAE/BF,WAAO,IAAG,CAAV;AAEErL,YAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCG,SAAlC,GAA6C,wBAAwBiL,OAAxB,GAAkC,IAA/E,CAJ6B,CAM7B;;AACA,QAAIA,OAAO,GAAG,CAAd,EAAiB;AACfG,mBAAa,CAACF,CAAD,CAAb;AACAtL,cAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CK,OAA7C,GAAuD,OAAvD;AACAP,cAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCG,SAAlC,GAA8C,EAA9C;AACD;AACF,GAZkB,EAYhB,IAZgB,CAAnB;AAaD,C;;;;;;;;;;;;;ACh9BD,CAAE,UAASqL,CAAT,EAAYC,CAAZ,EAAe;AACf,4CAAmBC,OAAnB,MAA8B,eAAe,OAAOC,MAApD,GACIF,CAAC,CAACC,OAAD,CADL,GAEI,QACAE,iCAAO,CAAC,OAAD,CAAD,oCAAcH,CAAd;AAAA;AAAA;AAAA,oGADN,GAEAA,SAJJ;AAKD,CANA,CAME,IANF,EAMQ,UAASD,CAAT,EAAY;AACnB;;AACA,WAAS/D,CAAT,CAAW+D,CAAX,EAAcC,CAAd,EAAiB;AACf,QAAI,EAAED,CAAC,YAAYC,CAAf,CAAJ,EAAuB,MAAM,IAAII,SAAJ,CAAc,mCAAd,CAAN;AACxB;;AACD,WAASC,CAAT,CAAWN,CAAX,EAAcC,CAAd,EAAiB;AACf,SAAK,IAAI3F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2F,CAAC,CAAC5C,MAAtB,EAA8B/C,CAAC,EAA/B,EAAmC;AACjC,UAAI2B,CAAC,GAAGgE,CAAC,CAAC3F,CAAD,CAAT;AACC2B,OAAC,CAACsE,UAAF,GAAetE,CAAC,CAACsE,UAAF,IAAgB,CAAC,CAAjC,EACGtE,CAAC,CAACuE,YAAF,GAAiB,CAAC,CADrB,EAEE,WAAWvE,CAAX,KAAiBA,CAAC,CAACwE,QAAF,GAAa,CAAC,CAA/B,CAFF,EAGE1B,MAAM,CAAC2B,cAAP,CAAsBV,CAAtB,EAAyB/D,CAAC,CAACoD,GAA3B,EAAgCpD,CAAhC,CAHF;AAID;AACF;;AACD,WAAS0E,CAAT,CAAWX,CAAX,EAAcC,CAAd,EAAiB3F,CAAjB,EAAoB;AAClB,WAAO2F,CAAC,IAAIK,CAAC,CAACN,CAAC,CAACY,SAAH,EAAcX,CAAd,CAAN,EAAwB3F,CAAC,IAAIgG,CAAC,CAACN,CAAD,EAAI1F,CAAJ,CAA9B,EAAsC0F,CAA7C;AACD;;AACD,WAASC,CAAT,CAAWD,CAAX,EAAcC,CAAd,EAAiB;AACf,QAAI,cAAc,OAAOA,CAArB,IAA0B,SAASA,CAAvC,EAA0C,MAAM,IAAII,SAAJ,CAAc,oDAAd,CAAN;AACzCL,KAAC,CAACY,SAAF,GAAc7B,MAAM,CAAC8B,MAAP,CAAcZ,CAAC,IAAIA,CAAC,CAACW,SAArB,EAAgC;AAAEE,iBAAW,EAAE;AAAE7M,aAAK,EAAE+L,CAAT;AAAYS,gBAAQ,EAAE,CAAC,CAAvB;AAA0BD,oBAAY,EAAE,CAAC;AAAzC;AAAf,KAAhC,CAAf,EACEP,CAAC,IAAI3F,CAAC,CAAC0F,CAAD,EAAIC,CAAJ,CADR;AAED;;AACD,WAASc,CAAT,CAAWf,CAAX,EAAc;AACZ,WAAO,CAACe,CAAC,GAAGhC,MAAM,CAACiC,cAAP,GACRjC,MAAM,CAACkC,cADC,GAER,UAASjB,CAAT,EAAY;AACV,aAAOA,CAAC,CAACkB,SAAF,IAAenC,MAAM,CAACkC,cAAP,CAAsBjB,CAAtB,CAAtB;AACD,KAJE,EAIAA,CAJA,CAAP;AAKD;;AACD,WAAS1F,CAAT,CAAW0F,CAAX,EAAcC,CAAd,EAAiB;AACf,WAAO,CAAC3F,CAAC,GACPyE,MAAM,CAACiC,cAAP,IACA,UAAShB,CAAT,EAAYC,CAAZ,EAAe;AACb,aAAQD,CAAC,CAACkB,SAAF,GAAcjB,CAAf,EAAmBD,CAA1B;AACD,KAJI,EAIFA,CAJE,EAICC,CAJD,CAAP;AAKD;;AACD,WAASkB,CAAT,CAAWnB,CAAX,EAAcC,CAAd,EAAiB;AACf,WAAO,CAACA,CAAD,IAAO,oBAAmBA,CAAnB,KAAwB,cAAc,OAAOA,CAApD,GACF,UAASD,CAAT,EAAY;AACX,UAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB,MAAM,IAAIoB,cAAJ,CAAmB,2DAAnB,CAAN;AAClB,aAAOpB,CAAP;AACD,KAHD,CAGGA,CAHH,CADG,GAKHC,CALJ;AAMD;;AACD,WAASoB,CAAT,CAAWrB,CAAX,EAAc;AACZ,WAAO,YAAY,OAAOA,CAA1B;AACD;;AACD,WAASsB,CAAT,CAAWtB,CAAX,EAAcC,CAAd,EAAiB3F,CAAjB,EAAoB;AAClB,QAAI2B,CAAC,GAAG,IAAIsF,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW2C,CAAnC,GAAuCA,CAAvC,GAA2C,KAAnD;AAAA,QACEM,CAAC,GAAG,IAAIiB,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW4C,CAAnC,GAAuCA,CAAvC,GAA2C,IADjD;AAAA,QAEEU,CAAC,GAAG,IAAIY,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW/C,CAAnC,GAAuCA,CAAvC,GAA2C,EAFjD;AAAA,QAGEyG,CAAC,GAAGxM,QAAQ,CAACiN,aAAT,CAAuBvF,CAAvB,CAHN;;AAIA,QAAI,SAASqE,CAAb,EAAgB;AACd,UAAIa,CAAC,GAAG,SAAJA,CAAI,CAASlB,CAAT,EAAY;AAClB,YAAID,CAAJ;AACA,SAAC,CAACA,CAAC,GAAGC,CAAL,EAAQhB,UAAR,CAAmB,IAAnB,IAA2Be,CAAC,CAACyB,WAAF,EAA3B,GAA6C,KAAKC,MAAL,CAAY1B,CAAZ,CAA9C,KAAiEpK,MAAjE,GACImL,CAAC,CAAC1G,gBAAF,CAAmB4F,CAAnB,EAAsB,UAASD,CAAT,EAAY;AAChCM,WAAC,CAACL,CAAD,CAAD,CAAKD,CAAL,EAAQe,CAAR;AACD,SAFD,CADJ,GAIIA,CAAC,CAACpC,YAAF,CAAesB,CAAf,EAAkBK,CAAC,CAACL,CAAD,CAAnB,CAJJ;AAKD,OAPD;;AAQA,WAAK,IAAIoB,CAAT,IAAcf,CAAd;AAAiBa,SAAC,CAACE,CAAD,CAAD;AAAjB;AACD;;AACD,WACE,IAAIV,CAAC,CAACtD,MAAN,IACEsD,CAAC,CAACgB,OAAF,CAAU,UAAS3B,CAAT,EAAY;AACpB,kBAAY,OAAOA,CAAnB,GAAuBe,CAAC,CAACa,WAAF,CAAcrN,QAAQ,CAACsN,cAAT,CAAwB7B,CAAxB,CAAd,CAAvB,GAAmEe,CAAC,CAACa,WAAF,CAAc5B,CAAd,CAAnE;AACD,KAFD,CADF,EAIAe,CALF;AAOD;;AACD,MAAIe,CAAC,GAAI,YAAW;AAChB,aAAS7B,CAAT,CAAWD,CAAX,EAAc;AACZ/D,OAAC,CAAC,IAAD,EAAOgE,CAAP,CAAD,EACG,KAAK8B,OAAL,GAAe/B,CADlB,EAEEqB,CAAC,CAACrB,CAAC,CAACrJ,KAAH,CAAD,KAAe,KAAKA,KAAL,GAAaqJ,CAAC,CAACrJ,KAA9B,CAFF,EAGG,KAAKqL,YAAL,GAAoB,CAAC,CAAD,KAAOhC,CAAC,CAACgC,YAHhC,EAIEX,CAAC,CAACrB,CAAC,CAACpJ,OAAH,CAAD,KAAiB,KAAKA,OAAL,GAAeoJ,CAAC,CAACpJ,OAAlC,CAJF,EAKEoJ,CAAC,CAACiC,SAAF,KAAgB,aAAa,OAAOjC,CAAC,CAACiC,SAAtB,IAAmCZ,CAAC,CAACrB,CAAC,CAACiC,SAAH,CAApD,IACK,KAAKA,SAAL,GAAiBjC,CAAC,CAACiC,SADxB,GAEK,KAAKA,SAAL,GAAiB,MAPxB,EAQG,KAAKC,IAAL,GAAY,IARf,EASG,KAAKxF,QAAL,GAAgB,KAAKyF,UAAL,EATnB;AAUD;;AACD,WACExB,CAAC,CAACV,CAAD,EAAI,CACH;AACEZ,SAAG,EAAE,YADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAG,IADN;AAAA,YAEE3F,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AACX,mBAAO,OADI;AAEXc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF;AACD;AAJU,SAAR,CAFP;AAQA,eACG/H,CAAC,CAAC3F,SAAF,GACC,iPADF,EAEC,KAAKuN,IAAL,GAAYZ,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,CAFd,EAGCtB,CAAC,GAAG,WAAW,KAAKiC,SAAhB,GAA4B,YAA5B,GAA2C,EAHhD,EAIC,KAAKK,SAAL,GAAiBhB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO,qBAAT;AAAgC7M,eAAK,EAAEuL;AAAvC,SAAR,EAAoD,CACrEsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA4B,CAACA,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA8B,CAAChH,CAAD,EAAI,KAAK4H,IAAT,CAA9B,CAAF,CAA5B,CADoE,CAApD,CAJnB,EAOA,KAAKI,SARP;AAUD;AArBH,KADG,EAwBH;AACEjD,SAAG,EAAE,QADP;AAEEpL,WAAK,EAAE,eAAS+L,CAAT,EAAY;AACjB,YAAIC,CAAJ;AAAA,YACE3F,CADF;AAAA,YAEE2B,CAFF;AAAA,YAGEqE,CAAC,GAAG,IAAIiB,SAAS,CAAClE,MAAd,IAAwB,KAAK,CAAL,KAAW2C,CAAnC,GAAuCA,CAAvC,GAA2CzL,QAAQ,CAACgO,IAH1D;AAIA,aAAKR,OAAL,CAAaS,YAAb,IAA6B,KAAKT,OAAL,CAAaS,YAAb,CAA0B,IAA1B,CAA7B,EACElC,CAAC,CAACsB,WAAF,CAAc,KAAKlF,QAAnB,CADF,EAEE,KAAKqF,OAAL,CAAaU,WAAb,IAA4B,KAAKV,OAAL,CAAaU,WAAb,CAAyB,IAAzB,CAF9B,EAGE,WAAW,KAAKR,SAAhB,KACIhC,CAAC,GAAG,KAAKvD,QAAV,EACAT,CAAC,GAAG,CADJ,EAEDrG,MAAM,CAAC8M,qBAAP,CAA6B,SAAS1C,CAAT,GAAa;AACxC,iBAAO/D,CAAP,IACKrG,MAAM,CAAC+M,oBAAP,CAA4B3C,CAA5B,GAAgC1F,CAAC,IAAIA,CAAC,CAAC2F,CAAD,CAD3C,KAEMhE,CAAC,IAAI,EAAN,EAAYgE,CAAC,CAACxL,KAAF,CAAQmO,OAAR,GAAkB,CAAC3G,CAAC,GAAG,GAAL,EAAUU,QAAV,EAA9B,EAAqD/G,MAAM,CAAC8M,qBAAP,CAA6B1C,CAA7B,CAF1D;AAGD,SAJD,CAHF,CAHF;AAWD;AAlBH,KAxBG,EA4CH;AACEX,SAAG,EAAE,SADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,aAAKqO,SAAL,CAAeO,aAAf,CAA6BC,WAA7B,CAAyC,KAAKR,SAA9C,GACE,KAAKP,OAAL,CAAagB,UAAb,IAA2B,KAAKhB,OAAL,CAAagB,UAAb,CAAwB,IAAxB,CAD7B;AAED;AALH,KA5CG,EAmDH;AACE1D,SAAG,EAAE,OADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAIgM,CAAJ;AAAA,YACE3F,CADF;AAAA,YAEE2B,CAFF;AAAA,YAGE+D,CAAC,GAAG,IAHN;AAIA,aAAK+B,OAAL,CAAaiB,WAAb,IAA4B,KAAKjB,OAAL,CAAaiB,WAAb,CAAyB,IAAzB,CAA5B,EACE,KAAKf,SAAL,GACI,WAAW,KAAKA,SAAhB,KACEhC,CAAC,GAAG,KAAKqC,SAAV,EACAhI,CAAC,GAAG,aAAW;AACd0F,WAAC,CAACiD,OAAF;AACD,SAHA,EAIAhH,CAAC,GAAG,GAJJ,EAKDrG,MAAM,CAAC8M,qBAAP,CAA6B,SAAS1C,CAAT,GAAa;AACxC/D,WAAC,IAAI,CAAL,IACKrG,MAAM,CAAC+M,oBAAP,CAA4B3C,CAA5B,GAAgC1F,CAAC,IAAIA,CAAC,CAAC2F,CAAD,CAD3C,KAEMhE,CAAC,IAAI,EAAN,EAAYgE,CAAC,CAACxL,KAAF,CAAQmO,OAAR,GAAkB,CAAC3G,CAAC,GAAG,GAAL,EAAUU,QAAV,EAA9B,EAAqD/G,MAAM,CAAC8M,qBAAP,CAA6B1C,CAA7B,CAF1D;AAGD,SAJD,CANA,CADJ,GAYI,KAAKiD,OAAL,EAbN;AAcD;AArBH,KAnDG,CAAJ,CAAD,EA2EAhD,CA5EF;AA8ED,GA3FK,EAAR;AAAA,MA4FEiD,CAAC,GAAI,YAAW;AACd,aAAS5I,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aAAOhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EAAY,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkCoD,cAAlC,EAAZ,EAAgEnD,CAAC,CAACoD,MAAF,EAAhE,EAA4EpD,CAAnF;AACD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CADP;;AAEA,YAAK,KAAKuL,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,GAA0B,KAAK+B,YAApC,EAAmD;AACjD,cAAI1H,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACChH,WAAC,CAAC3F,SAAF,GAAc,KAAKiC,OAApB,EAA+BoJ,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAAChH,CAAD,CAAtC,CAApC;AACD,SAHD,MAGO0F,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,CAAtC,CAAL;;AACP,aAAKsL,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,GAA0B,KAAKiC,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,CAA1B;AACD;AAVH,KADG,CAAJ,CADD,EAeA1F,CAhBF;AAkBD,GAvBG,EA5FN;AAAA,MAoHEgJ,CAAC,GAAI,YAAW;AACd,aAAShJ,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aACEhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EACC,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkCuD,UAAlC,GAA+ClC,CAAC,CAACrB,CAAC,CAACuD,UAAH,CAAD,GAAkBvD,CAAC,CAACuD,UAApB,GAAiC,MADjF,EAECtD,CAAC,CAACuD,eAAF,GAAoBnC,CAAC,CAACrB,CAAC,CAACwD,eAAH,CAAD,GAAuBxD,CAAC,CAACwD,eAAzB,GAA2C,MAFhE,EAGAvD,CAAC,CAACmD,cAAF,EAHA,EAIAnD,CAAC,CAACoD,MAAF,EAJA,EAKApD,CANF;AAQD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,aADP;AAEEpL,WAAK,EAAE,eAAS+L,CAAT,EAAY;AAChB,oBAAYA,CAAC,CAACX,GAAd,IAAqB,OAAOW,CAAC,CAACyD,OAA/B,IAA2C,KAAKxO,MAAL,EAA3C;AACD;AAJH,KADG,EAOH;AACEoK,SAAG,EAAE,QADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAC,GAAG,KAAK0D,KAAL,CAAWzP,KAAnB;AACA,eAAO+L,CAAP,KAAa,KAAKqC,KAAL,IAAc,KAAKN,OAAL,CAAa3M,QAAb,IAAyB,KAAK2M,OAAL,CAAa3M,QAAb,CAAsB,IAAtB,EAA4B4K,CAA5B,CAApD;AACD;AALH,KAPG,EAcH;AACEX,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAIqG,CAAC,GAAG,IAAR;AAAA,YACE0F,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CADP;AAEA,aAAKuL,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,GACG,KAAK0D,KAAL,GAAapC,CAAC,CAAC,OAAD,EAAU;AACvB7C,cAAI,EAAE,MADiB;AAEvB,mBAAO,OAFgB;AAGvBkF,qBAAW,EAAE,KAAKH,eAHK;AAIvBjE,eAAK,EAAE,eAASS,CAAT,EAAYC,CAAZ,EAAe;AACpB3F,aAAC,CAACsJ,WAAF,CAAc5D,CAAd,EAAiBC,CAAjB;AACD;AANsB,SAAV,CADjB;AASA,YAAIA,CAAJ;AAAA,YACEhE,CAAC,GAAGqF,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CACzC,KAAKoC,KADoC,EAEzCpC,CAAC,CACC,QADD,EAEC;AACE,mBAAO,QADT;AAEEc,eAAK,EAAE,iBAAW;AAChB9H,aAAC,CAACrF,MAAF;AACD;AAJH,SAFD,EAQC,CAAC,KAAKsO,UAAN,CARD,CAFwC,CAAtC,CADP;;AAcA,YAAI,KAAKvB,YAAT,EAAuB;AACrB,cAAI1B,CAAC,GAAGgB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACChB,WAAC,CAAC3L,SAAF,GAAc,KAAKiC,OAApB,EAA+BqJ,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAAChB,CAAD,EAAIrE,CAAJ,CAAtC,CAApC;AACD,SAHD,MAGOgE,CAAC,GAAGqB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,EAA+CqF,CAA/C,CAAtC,CAAL;;AACP,aAAKiG,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,GAA0B,KAAKkC,IAAL,CAAUN,WAAV,CAAsB3B,CAAtB,CAA1B;AACD;AAjCH,KAdG,CAAJ,CADD,EAmDA3F,CApDF;AAsDD,GAlEG,EApHN;AAAA,MAuLEuJ,CAAC,GAAI,YAAW;AACd,aAASvJ,CAAT,CAAW0F,CAAX,EAAc;AACZ,UAAIC,CAAJ;AACA,aACEhE,CAAC,CAAC,IAAD,EAAO3B,CAAP,CAAD,EACC,CAAC2F,CAAC,GAAGkB,CAAC,CAAC,IAAD,EAAOJ,CAAC,CAACzG,CAAD,CAAD,CAAK6I,IAAL,CAAU,IAAV,EAAgBnD,CAAhB,CAAP,CAAN,EAAkC8D,YAAlC,GAAiDzC,CAAC,CAACrB,CAAC,CAAC8D,YAAH,CAAD,GAAoB9D,CAAC,CAAC8D,YAAtB,GAAqC,IADvF,EAEC7D,CAAC,CAAC8D,aAAF,GAAkB1C,CAAC,CAACrB,CAAC,CAAC+D,aAAH,CAAD,GAAqB/D,CAAC,CAAC+D,aAAvB,GAAuC,OAF1D,EAGA9D,CAAC,CAACmD,cAAF,EAHA,EAIAnD,CAAC,CAACoD,MAAF,EAJA,EAKApD,CANF;AAQD;;AACD,WACEA,CAAC,CAAC3F,CAAD,EAAIwH,CAAJ,CAAD,EACAnB,CAAC,CAACrG,CAAD,EAAI,CACH;AACE+E,SAAG,EAAE,gBADP;AAEEpL,WAAK,EAAE,iBAAW;AAChB,YAAI+L,CAAJ;AAAA,YACEC,CAAC,GAAG,IADN;AAAA,YAEE3F,CAAC,GAAGgH,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA2B,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA0B,CAAC,KAAK3K,KAAN,CAA1B,CAAF,CAA3B,CAFP;;AAGA,YAAK,KAAKuL,IAAL,CAAUN,WAAV,CAAsBtH,CAAtB,GAA0B,KAAK0H,YAApC,EAAmD;AACjD,cAAI/F,CAAC,GAAGqF,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,CAAT;AACCrF,WAAC,CAACtH,SAAF,GAAc,KAAKiC,OAApB,EAA+BoJ,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,qBAAO;AAAT,WAAR,EAAsC,CAACrF,CAAD,CAAtC,CAApC;AACD,SAHD,MAGO+D,CAAC,GAAGsB,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAAsC,CAACA,CAAC,CAAC,GAAD,EAAM;AAAE,mBAAO;AAAT,SAAN,EAA4B,CAAC,KAAK1K,OAAN,CAA5B,CAAF,CAAtC,CAAL;;AACPoJ,SAAC,CAAC4B,WAAF,CACEN,CAAC,CAAC,KAAD,EAAQ;AAAE,mBAAO;AAAT,SAAR,EAA8B,CAC7BA,CAAC,CACC,QADD,EAEC;AACE,mBAAO,QADT;AAEEc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF,IAAWpC,CAAC,CAAC8B,OAAF,CAAUiC,QAAV,IAAsB/D,CAAC,CAAC8B,OAAF,CAAUiC,QAAV,CAAmB/D,CAAnB,CAAjC;AACD;AAJH,SAFD,EAQC,CAAC,KAAK6D,YAAN,CARD,CAD4B,EAW7BxC,CAAC,CACC,QADD,EAEC;AACE,mBAAO,SADT;AAEEc,eAAK,EAAE,iBAAW;AAChBnC,aAAC,CAACoC,KAAF,IAAWpC,CAAC,CAAC8B,OAAF,CAAUkC,SAAV,IAAuBhE,CAAC,CAAC8B,OAAF,CAAUkC,SAAV,CAAoBhE,CAApB,CAAlC;AACD;AAJH,SAFD,EAQC,CAAC,KAAK8D,aAAN,CARD,CAX4B,CAA9B,CADH,GAwBE,KAAK7B,IAAL,CAAUN,WAAV,CAAsBtH,CAAtB,CAxBF,EAyBE,KAAK4H,IAAL,CAAUN,WAAV,CAAsB5B,CAAtB,CAzBF;AA0BD;AApCH,KADG,CAAJ,CADD,EAyCA1F,CA1CF;AA4CD,GAxDG,EAvLN;;AAgPC0F,GAAC,CAACkE,KAAF,GAAUhB,CAAX,EACGlD,CAAC,CAACmE,OAAF,GAAYN,CADf,EAEG7D,CAAC,CAACoE,MAAF,GAAWd,CAFd,EAGGtD,CAAC,CAACqE,OAAF,GAAY,OAHf,EAIEtF,MAAM,CAAC2B,cAAP,CAAsBV,CAAtB,EAAyB,YAAzB,EAAuC;AAAE/L,SAAK,EAAE,CAAC;AAAV,GAAvC,CAJF;AAKD,CAlUA,CAAD,C;;;;;;;;;;;;;;;;;;;ICAMqQ,e;;;;;;;4BAEM;AACJ,aAAOC,KAAK,CAAC,oBAAD,CAAL,CAA4BvQ,IAA5B,CAAiC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAAzC,CAAP;AACH;;;;;;AAIL,IAAMtQ,eAAe,GAAG,IAAIoQ,eAAJ,EAAxB;AAEepQ,8EAAf,E;;;;;;;;;;;;;;;;;;;;ACVA,IAAMuQ,WAAW,GAAG;AAChB,kBAAgB,kBADA;AAEhB,0BAAwB;AAFR,CAApB;AAKA,IAAMC,YAAY,GAAG;AACjB,kBAAgB,kBADC;AAEjB,mBAAiB,YAAYnR,YAAY,CAACC,OAAb,CAAqB,OAArB;AAFZ,CAArB;;AAKA,IAAMmR,YAAY,GAAG,SAAfA,YAAe;AAAA,SAAO;AACxB,oBAAgB,kBADQ;AAExB,4BAAwB,4GAFA;AAGxB,qBAAiB,YAAYpR,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHL,GAAP;AAAA,CAArB;;AAMA,IAAMoR,GAAG,GAAG,8BAAZ;AACA,IAAMC,cAAc,GAAG,8BAAvB;AAEO,IAAMC,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,gCAEgBtS,MAFhB,EAEwBkH,UAFxB,EAEoC;AAC5B,UAAMzG,IAAI,GAAG;AACT8R,gBAAQ,EAAEvS,MADD;AAETwS,kBAAU,EAAEC,QAAQ,CAACvL,UAAD,CAFX;AAGTwL,eAAO,EAAE,CAAC,CAAD,EAAG,CAAH;AAHA,OAAb;AAKAzR,aAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,aAAO,CAACC,GAAR,CAAYT,IAAZ;AACA,aAAOsR,KAAK,WAAIK,GAAJ,wCAA4C;AACpDO,cAAM,EAAE,MAD4C;AAEpD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAF8C;AAGpDmS,eAAO,EAAEX;AAH2C,OAA5C,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAfL;AAAA;AAAA,mCAiBmBa,IAjBnB,EAiByBC,QAjBzB,EAiBmCnS,QAjBnC,EAiB6CkG,IAjB7C,EAiBmDkM,MAjBnD,EAiB2DlR,EAjB3D,EAiB+D;AACvD,UAAMpB,IAAI,GAAG;AACTkG,iBAAS,EAAEkM,IADF;AAETjM,gBAAQ,EAAEkM,QAFD;AAGTnS,gBAAQ,EAAEA,QAHD;AAITkG,YAAI,EAAEA,IAJG;AAKTC,sBAAc,EAAEiM,MALP;AAMTR,gBAAQ,EAAE1Q;AAND,OAAb;AAQA,aAAOkQ,KAAK,WAAIK,GAAJ,sCAA0C;AAClDO,cAAM,EAAE,MAD0C;AAElD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAF4C;AAGlDmS,eAAO,EAAEX;AAHyC,OAA1C,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA/BL;AAAA;AAAA,iCAgCiBnL,IAhCjB,EAgCuBmM,WAhCvB,EAgCoCnR,EAhCpC,EAgCwCoD,OAhCxC,EAgCiDgO,SAhCjD,EAgC4D/N,EAhC5D,EAgCgE6N,MAhChE,EAgCwEG,MAhCxE,EAiCQC,OAjCR,EAiCiBC,MAjCjB,EAiCyBC,YAjCzB,EAiCuCC,WAjCvC,EAiCoDC,WAjCpD,EAiCiE9P,MAjCjE,EAiCyE;AACjE,UAAMhD,IAAI,GAAG;AACToG,YAAI,EAAEA,IADG;AAETc,mBAAW,EAAEqL,WAFJ;AAGTQ,kBAAU,EAAE;AACRC,kBAAQ,EAAE5R,EADF;AAERoD,iBAAO,EAAEA,OAFD;AAGRC,YAAE,EAAEA,EAHI;AAIRP,kBAAQ,EAAEoO,MAJF;AAKRlO,kBAAQ,EAAEqO,MALF;AAMRpO,mBAAS,EAAEqO,OANH;AAORO,mBAAS,EAAEN,MAPH;AAQRO,4BAAkB,EAAEN,YARZ;AASRO,8BAAoB,EAAEN;AATd;AAHH,OAAb;AAeA,UAAIC,WAAW,KAAK,EAAhB,IAAsBA,WAAW,KAAKzQ,SAA1C,EAAqDrC,IAAI,CAAC8S,WAAL,GAAmBA,WAAnB;AACrD,UAAI9P,MAAM,KAAK,EAAX,IAAiBA,MAAM,KAAKX,SAAhC,EAA2CrC,IAAI,CAACgD,MAAL,GAAcA,MAAd;AAC3CxC,aAAO,CAACC,GAAR,wBAA4BqS,WAA5B;AACAtS,aAAO,CAACC,GAAR,mBAAuBqS,WAAvB;AACAtS,aAAO,CAACC,GAAR,CAAYT,IAAZ;AACA,aAAOsR,KAAK,WAAIK,GAAJ,qCAAyC;AACjDO,cAAM,EAAE,MADyC;AAEjD5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAF2C;AAGjDmS,eAAO,EAAEX;AAHwC,OAAzC,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA3DL;AAAA;AAAA,6BA4Da6B,IA5Db,EA4DmBpT,IA5DnB,EA4DyB;AACjB,UAAMuM,GAAG,GAAG;AACR6G,YAAI,EAAEA,IADE;AAERpT,YAAI,EAAEA;AAFE,OAAZ;AAIAQ,aAAO,CAACC,GAAR,CAAY8L,GAAZ;AACA,aAAO+E,KAAK,WAAIK,GAAJ,gCAAoC;AAC5CO,cAAM,EAAE,MADoC;AAE5C5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAeyD,GAAf,CAFsC;AAG5C4F,eAAO,EAAEX;AAHmC,OAApC,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAvEL;AAAA;AAAA,+BAyEe;AACP,aAAOD,KAAK,WAAIK,GAAJ,mBAAL,CAA6B5Q,IAA7B,CAAkC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAA1C,CAAP;AACH;AA3EL;AAAA;AAAA,sCA6EsB8B,GA7EtB,EA6E2B;AACnB,UAAI7Q,EAAE,GAAG,EAAT;;AACA,WAAK,IAAIwG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqK,GAAG,CAACjJ,MAAxB,EAAgCpB,CAAC,EAAjC,EAAqC;AACjCxG,UAAE,IAAI,SAAS6Q,GAAG,CAACrK,CAAD,CAAZ,GAAkB,GAAxB;AACH;;AAEDxG,QAAE,GAAGA,EAAE,CAAC8Q,KAAH,CAAS,CAAT,EAAY,CAAC,CAAb,CAAL;AAEA,aAAOhC,KAAK,WAAIK,GAAJ,oCAAiCnP,EAAjC,EAAL,CAA4CzB,IAA5C,CAAiD,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAAzD,CAAP;AACH;AAtFL;AAAA;AAAA,kCAwFkBgC,IAxFlB,EAwFwB;AAChB,UAAMvT,IAAI,GAAG;AACTwT,mBAAW,EAAED;AADJ,OAAb;AAGA,aAAOjC,KAAK,WAAIK,GAAJ,4BAAgC;AACxCO,cAAM,EAAE,MADgC;AAExC5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAFkC;AAGxCmS,eAAO,EAAET,YAAY;AAHmB,OAAhC,CAAL,CAIJ3Q,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AAjGL;AAAA;AAAA,iCAmGiBa,IAnGjB,EAmGuBnS,KAnGvB,EAmG8BiH,WAnG9B,EAmG2C;AACnC,UAAMlH,IAAI,GAAG;AACToS,YAAI,EAAEA,IADG;AAETnS,aAAK,EAAEA,KAFE;AAGTiH,mBAAW,EAAE8K,QAAQ,CAAC9K,WAAD;AAHZ,OAAb;AAKA,aAAOoK,KAAK,WAAIM,cAAJ,mCAAkD;AAC1DM,cAAM,EAAE,MADkD;AAE1D5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAFoD;AAG1DmS,eAAO,EAAEX;AAHiD,OAAlD,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA9GL;AAAA;AAAA,oCAgHoBkC,IAhHpB,EAgH0BC,QAhH1B,EAgHoCC,aAhHpC,EAgHmD;AAC3CnT,aAAO,CAACC,GAAR,CAAYgR,YAAZ;AACA,UAAMzR,IAAI,GAAG;AACTyT,YAAI,EAAEA,IADG;AAETC,gBAAQ,EAAEA,QAFD;AAGTC,qBAAa,EAAEA;AAHN,OAAb;AAKA,UAAMC,IAAI,aAAMhC,cAAN,gCAAV,CAP2C,CAQ3C;AACA;;AACA,aAAON,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,MADO;AAEf5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAFS;AAGfmS,eAAO,EAAEV;AAHM,OAAP,CAAL,CAIJ1Q,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA/HL;AAAA;AAAA,2CAiI2BnL,IAjI3B,EAiIiC;AACzB,UAAMwN,IAAI,aAAMjC,GAAN,+DAA8DvL,IAA9D,CAAV;AACA,aAAOkL,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,KADO;AAEfC,eAAO,EAAEX;AAFM,OAAP,CAAL,CAGJzQ,IAHI,CAGC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAHT,CAAP;AAIH;AAvIL;AAAA;AAAA,mCAyImB;AACX,UAAMqC,IAAI,aAAMjC,GAAN,mCAAV;AACA,aAAOL,KAAK,CAACsC,IAAD,EAAO;AACf1B,cAAM,EAAE,KADO;AAEfC,eAAO,EAAEX;AAFM,OAAP,CAAL,CAGJzQ,IAHI,CAGC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAHT,CAAP;AAIH;AA/IL;AAAA;AAAA,oCAiJoBsC,SAjJpB,EAiJ+B;AACvB,UAAM7T,IAAI,GAAG;AACT6T,iBAAS,EAAEA;AADF,OAAb;AAGA,aAAOvC,KAAK,WAAIK,GAAJ,iDAAqD;AAC7DO,cAAM,EAAE,MADqD;AAE7D5C,YAAI,EAAEzG,IAAI,CAACC,SAAL,CAAe9I,IAAf,CAFuD;AAG7DmS,eAAO,EAAEX;AAHoD,OAArD,CAAL,CAIJzQ,IAJI,CAIC,UAAA+C,QAAQ;AAAA,eAAIA,QAAQ,CAACyN,IAAT,EAAJ;AAAA,OAJT,CAAP;AAKH;AA1JL;;AAAA;AAAA;AA+JA,IAAMtO,cAAc,GAAG,IAAI4O,cAAJ,EAAvB;AAEe5O,6EAAf,E;;;;;;;;;;;;;;;;;;;ICpLM6Q,c;AACJ,4BAAc;AAAA;AAAG;;;;6BAsGR;AACP,UAAIC,IAAI,GAAGzT,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;;AACA,UAAIwT,IAAI,IAAI,IAAZ,EAAkB;AACdA,YAAI,GAAG,GAAP;AACH;;AACDzT,kBAAY,CAAC0T,KAAb;AACA1T,kBAAY,CAACe,OAAb,CAAqB,MAArB,EAA6B0S,IAA7B;AACD;;;wBA3Gc;AACb,aAAOzT,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAP;AACD;;;wBACgB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP;AACD;;;wBAEY;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;wBAEY;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;wBAEsB;AACrB,aAAOD,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAP;AACD;;;wBAEqB;AACpB,aAAOD,YAAY,CAACC,OAAb,CAAqB,sBAArB,CAAP;AACD;;;wBAEoB;AACnB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAP;AACD;;;wBAEc;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD;;;wBAEkB;AACjB,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;wBAEe;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;wBAEmB;AAClB,aAAOD,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD;;;wBAEkB;AACjB,aAAOD,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAP;AACD;;;wBAEgB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP;AACD;;;wBAEe;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAP;AACD;;;wBAEgB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;wBAEc;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,IAAxC;AACD;;;wBAEsB;AACrB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,KAA0C,IAAjD;AACD;;;wBAEa;AACZ,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,GAAxC;AACD;;;wBAEgB;AACf,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,IAAvC;AACD;;;wBAEe;AACd,aAAOD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAP;AACD;;;wBAEc;AACb,aAAOD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAP;AACD;;;wBAEoB;AACnB,aAAOD,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAP;AACD;;;wBAEU;AACT,aAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAP;AACD;;;wBAEY;AACX,aAAOD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAP;AACD;;;sBAGiBS,K,EAAO;AACvBV,kBAAY,CAACe,OAAb,CAAqB,OAArB,EAA8BL,KAA9B;AACD;;;;;;AAYH,IAAM+B,cAAc,GAAG,IAAI+Q,cAAJ,EAAvB;AAEe/Q,6EAAf,E;;;;;;;;;;;;ACnHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA;;;;AAMO,SAASkR,wBAAT,CAAkCjU,IAAlC,EAAwC;AAC3C,MAAIkU,MAAM,GAAG,EAAb;AACA,MAAMC,GAAG,GAAGnU,IAAI,CAACoU,UAAjB;;AAEA,OAAK,IAAIpL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmL,GAApB,EAAyB,EAAEnL,CAA3B,EAA8B;AAC1BkL,UAAM,IAAIG,MAAM,CAACC,YAAP,CAAoBtU,IAAI,CAACgJ,CAAD,CAAxB,CAAV;AACH;;AACD,SAAOrG,MAAM,CAACsF,IAAP,CAAYiM,MAAZ,CAAP;AACH;AAED;;;;;AAIO,SAASK,YAAT,CAAsBC,GAAtB,EAA2B;AAC9B,MAAMN,MAAM,GAAGvR,MAAM,CAAC8R,IAAP,CAAYD,GAAZ,CAAf;AACA,MAAML,GAAG,GAAGD,MAAM,CAAC9J,MAAnB;AACA,MAAMsK,KAAK,GAAG,IAAIC,UAAJ,CAAeR,GAAf,CAAd;;AAEA,OAAK,IAAInL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmL,GAApB,EAAyB,EAAEnL,CAA3B,EAA8B;AAC1B0L,SAAK,CAAC1L,CAAD,CAAL,GAAWkL,MAAM,CAACU,UAAP,CAAkB5L,CAAlB,CAAX;AACH;;AACD,SAAO0L,KAAP;AACH;AAEM,SAASG,MAAT,CAAgBC,MAAhB,EAAwB;AAC3B,MAAIf,IAAI,GAAGzT,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;;AACA,MAAIwT,IAAI,IAAI,IAAZ,EAAkB;AACdA,QAAI,GAAG,GAAP;AACH;;AACDzT,cAAY,CAAC0T,KAAb;AACA1T,cAAY,CAACe,OAAb,CAAqB,MAArB,EAA6B0S,IAA7B;AACAe,QAAM,CAACC,aAAP,CAAqB,EAArB;AACH;AAED;;;;;AAIO,SAASC,wBAAT,CAAkCC,MAAlC,EAA0C;AAC7C,MAAIA,MAAM,CAAC7K,MAAP,IAAiB,EAAjB,IAAuB6K,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiB,CAAjB,MAAwB,MAAnD,EAA2D;AACvD,UAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAM9G,CAAC,GAAG4G,MAAM,CAACG,OAAP,CAAe,GAAf,IAAsB,CAAhC;;AACA,MAAI/G,CAAC,KAAK,CAAV,EAAa;AACT,UAAM,IAAI8G,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAM3J,IAAI,GAAGyJ,MAAM,CAACC,MAAP,CAAc7G,CAAd,EAAiB,CAAjB,CAAb;;AACA,MAAI7C,IAAI,KAAK,QAAb,EAAuB;AACnB,UAAM,IAAI2J,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,MAAME,SAAS,GAAGJ,MAAM,CAACG,OAAP,CAAe,GAAf,IAAsB,CAAxC;;AAEA,MAAIC,SAAS,KAAK,CAAlB,EAAqB;AACjB,UAAM,IAAIF,KAAJ,CAAU,aAAV,CAAN;AACH;;AAED,MAAMG,GAAG,GAAGL,MAAM,CAACC,MAAP,CAAcG,SAAd,EAAyB,CAAzB,CAAZ;;AAEA,MAAIC,GAAG,KAAK,SAAZ,EAAuB;AACnB,UAAM,IAAIH,KAAJ,CAAU,aAAV,CAAN;AACH;;AAED,MAAMI,SAAS,GAAGN,MAAM,CAACC,MAAP,CAAc7G,CAAC,GAAG,CAAlB,EAAqBgH,SAAS,GAAG,CAAZ,GAAgBhH,CAAhB,GAAoB,CAAzC,CAAlB;AAEA,SAAOkH,SAAS,CAAC/G,WAAV,EAAP;AACH;AAED;;;;AAGO,SAASgH,SAAT,CAAmBC,OAAnB,EAA4B;AAC/B,MAAMC,UAAU,GAAGjB,IAAI,CAACgB,OAAO,CAACxK,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAAvB;AACA,MAAM0K,EAAE,GAAG,IAAIC,WAAJ,CAAgBF,UAAU,CAACtL,MAA3B,CAAX;AACA,MAAMyL,EAAE,GAAG,IAAIlB,UAAJ,CAAegB,EAAf,CAAX;;AAEA,OAAK,IAAI3M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0M,UAAU,CAACtL,MAA/B,EAAuCpB,CAAC,EAAxC,EAA4C;AACxC6M,MAAE,CAAC7M,CAAD,CAAF,GAAQ0M,UAAU,CAACd,UAAX,CAAsB5L,CAAtB,CAAR;AACH;;AACD,SAAO,IAAI8M,IAAJ,CAAS,CAACH,EAAD,CAAT,EAAe;AAAEnK,QAAI,EAAE;AAAR,GAAf,CAAP;AACH;AAED;;;;AAGO,SAASuK,mBAAT,CAA6BC,KAA7B,EAAoC;AACvC,MAAIA,KAAK,KAAK,uBAAd,EAAuC;AACnC,WAAO,SAAP;AACH,GAFD,MAEO;AACH,WAAO,SAAP;AACH;AACJ;AAED;;;;;AAIO,SAASC,YAAT,CAAsBtT,MAAtB,EAA8B;AACjC;AACI,QAAMuT,OAAO,GAAG,SAAhB,CADJ,CAGI;;AACA,QAAMC,IAAI,GAAGC,SAAS,CAACC,UAAvB;AACA,QAAMC,IAAI,GAAGF,SAAS,CAAC5D,SAAvB;AACA,QAAIhO,OAAO,GAAG4R,SAAS,CAACG,OAAxB;AACA,QAAInF,OAAO,GAAG,KAAKoF,UAAU,CAACJ,SAAS,CAACC,UAAX,CAA7B;AACA,QAAII,YAAY,GAAGzE,QAAQ,CAACoE,SAAS,CAACC,UAAX,EAAuB,EAAvB,CAA3B;AACA,QAAIK,UAAJ;AACA,QAAIC,SAAJ;AACA,QAAIC,EAAJ;;AAEA,QAAI,CAACD,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,OAAb,CAAb,KAAuC,CAAC,CAA5C,EAA+C;AAC3C5Q,aAAO,GAAG,OAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AAC7ChE,eAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH;AACJ;;AACD,QAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,KAAb,CAAb,KAAqC,CAAC,CAA1C,EAA6C;AACzC5Q,aAAO,GAAG,OAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHD,MAGO,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,MAAb,CAAb,KAAsC,CAAC,CAA3C,EAA8C;AACjD5Q,aAAO,GAAG,gBAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,MAAb,CAAb,KAAsC,CAAC,CAA3C,EAA8C;AACjD5Q,aAAO,GAAG,6BAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,QAAb,CAAb,KAAwC,CAAC,CAA7C,EAAgD;AACnD5Q,aAAO,GAAG,QAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,QAAb,CAAb,KAAwC,CAAC,CAA7C,EAAgD;AACnD5Q,aAAO,GAAG,QAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AAC7ChE,eAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH;AACJ,KANM,MAMA,IAAI,CAACA,SAAS,GAAGL,IAAI,CAAClB,OAAL,CAAa,SAAb,CAAb,KAAyC,CAAC,CAA9C,EAAiD;AACpD5Q,aAAO,GAAG,SAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;AACH,KAHM,MAGA,IAAIL,IAAI,CAAClB,OAAL,CAAa,UAAb,KAA4B,CAAC,CAAjC,EAAoC;AACvC5Q,aAAO,GAAG,6BAAV;AACA4M,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeP,IAAI,CAAClB,OAAL,CAAa,KAAb,IAAsB,CAArC,CAAV;AACH,KAHM,MAGA,IAAI,CAACsB,UAAU,GAAGJ,IAAI,CAACQ,WAAL,CAAiB,GAAjB,IAAwB,CAAtC,KAA4CH,SAAS,GAAGL,IAAI,CAACQ,WAAL,CAAiB,GAAjB,CAAxD,CAAJ,EAAoF;AACvFtS,aAAO,GAAG8R,IAAI,CAACO,SAAL,CAAeH,UAAf,EAA2BC,SAA3B,CAAV;AACAvF,aAAO,GAAGkF,IAAI,CAACO,SAAL,CAAeF,SAAS,GAAG,CAA3B,CAAV;;AACA,UAAInS,OAAO,CAACgK,WAAR,OAA0BhK,OAAO,CAACuS,WAAR,EAA9B,EAAqD;AACjDvS,eAAO,GAAG4R,SAAS,CAACG,OAApB;AACH;AACJ,KAlDL,CAmDI;;;AACA,QAAI,CAACK,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AACD,QAAI,CAACA,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AACD,QAAI,CAACA,EAAE,GAAGxF,OAAO,CAACgE,OAAR,CAAgB,GAAhB,CAAN,KAA+B,CAAC,CAApC,EAAuC;AACnChE,aAAO,GAAGA,OAAO,CAACyF,SAAR,CAAkB,CAAlB,EAAqBD,EAArB,CAAV;AACH;;AAEDH,gBAAY,GAAGzE,QAAQ,CAAC,KAAKZ,OAAN,EAAe,EAAf,CAAvB;;AACA,QAAI4F,KAAK,CAACP,YAAD,CAAT,EAAyB;AACrBrF,aAAO,GAAG,KAAKoF,UAAU,CAACJ,SAAS,CAACC,UAAX,CAAzB;AACAI,kBAAY,GAAGzE,QAAQ,CAACoE,SAAS,CAACC,UAAX,EAAuB,EAAvB,CAAvB;AACH,KAlEL,CAoEI;;;AACA,QAAI5R,EAAE,GAAGyR,OAAT;AACA,QAAMe,aAAa,GAAG,CAClB;AAAEvJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KADkB,EAElB;AAAEJ,OAAC,EAAE,aAAL;AAAoBI,OAAC,EAAE;AAAvB,KAFkB,EAGlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAHkB,EAIlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAJkB,EAKlB;AAAEJ,OAAC,EAAE,eAAL;AAAsBI,OAAC,EAAE;AAAzB,KALkB,EAMlB;AAAEJ,OAAC,EAAE,qBAAL;AAA4BI,OAAC,EAAE;AAA/B,KANkB,EAOlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAPkB,EAQlB;AAAEJ,OAAC,EAAE,cAAL;AAAqBI,OAAC,EAAE;AAAxB,KARkB,EASlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KATkB,EAUlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAVkB,EAWlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAXkB,EAYlB;AAAEJ,OAAC,EAAE,gBAAL;AAAuBI,OAAC,EAAE;AAA1B,KAZkB,EAalB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KAbkB,EAclB;AAAEJ,OAAC,EAAE,cAAL;AAAqBI,OAAC,EAAE;AAAxB,KAdkB,EAelB;AAAEJ,OAAC,EAAE,SAAL;AAAgBI,OAAC,EAAE;AAAnB,KAfkB,EAgBlB;AAAEJ,OAAC,EAAE,UAAL;AAAiBI,OAAC,EAAE;AAApB,KAhBkB,EAiBlB;AAAEJ,OAAC,EAAE,QAAL;AAAeI,OAAC,EAAE;AAAlB,KAjBkB,EAkBlB;AAAEJ,OAAC,EAAE,WAAL;AAAkBI,OAAC,EAAE;AAArB,KAlBkB,EAmBlB;AAAEJ,OAAC,EAAE,OAAL;AAAcI,OAAC,EAAE;AAAjB,KAnBkB,EAoBlB;AAAEJ,OAAC,EAAE,KAAL;AAAYI,OAAC,EAAE;AAAf,KApBkB,EAqBlB;AAAEJ,OAAC,EAAE,UAAL;AAAiBI,OAAC,EAAE;AAApB,KArBkB,EAsBlB;AAAEJ,OAAC,EAAE,QAAL;AAAeI,OAAC,EAAE;AAAlB,KAtBkB,EAuBlB;AAAEJ,OAAC,EAAE,KAAL;AAAYI,OAAC,EAAE;AAAf,KAvBkB,EAwBlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KAxBkB,EAyBlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KAzBkB,EA0BlB;AAAEJ,OAAC,EAAE,MAAL;AAAaI,OAAC,EAAE;AAAhB,KA1BkB,EA2BlB;AAAEJ,OAAC,EAAE,YAAL;AAAmBI,OAAC,EAAE;AAAtB,KA3BkB,CAAtB;;AA6BA,SAAK,IAAItL,EAAT,IAAeyU,aAAf,EAA8B;AAC1B,UAAIC,EAAE,GAAGD,aAAa,CAACzU,EAAD,CAAtB;;AACA,UAAI0U,EAAE,CAACpJ,CAAH,CAAKxD,IAAL,CAAUgM,IAAV,CAAJ,EAAqB;AACjB7R,UAAE,GAAGyS,EAAE,CAACxJ,CAAR;AACA;AACH;AACJ;;AAED,QAAIyJ,SAAS,GAAGjB,OAAhB;;AAEA,QAAI,UAAU5L,IAAV,CAAe7F,EAAf,CAAJ,EAAwB;AACpB0S,eAAS,GAAG,eAAeC,IAAf,CAAoB3S,EAApB,EAAwB,CAAxB,CAAZ;AACAA,QAAE,GAAG,SAAL;AACH;;AAED,YAAQA,EAAR;AACI,WAAK,UAAL;AACI0S,iBAAS,GAAG,yBAAyBC,IAAzB,CAA8Bd,IAA9B,EAAoC,CAApC,CAAZ;AACA;;AAEJ,WAAK,SAAL;AACIa,iBAAS,GAAG,sBAAsBC,IAAtB,CAA2Bd,IAA3B,EAAiC,CAAjC,CAAZ;AACA;;AAEJ,WAAK,KAAL;AACIa,iBAAS,GAAG,yBAAyBC,IAAzB,CAA8BjB,IAA9B,CAAZ;AACAgB,iBAAS,GAAGA,SAAS,CAAC,CAAD,CAAT,GAAe,GAAf,GAAqBA,SAAS,CAAC,CAAD,CAA9B,GAAoC,GAApC,IAA2CA,SAAS,CAAC,CAAD,CAAT,GAAe,CAA1D,CAAZ;AACA;AAZR;AAcH;AAED,SAAOxU,MAAM,CAAC0U,IAAP,GAAc;AACjB7S,WAAO,EAAEA,OADQ;AAEjB8S,kBAAc,EAAElG,OAFC;AAGjBmG,uBAAmB,EAAEd,YAHJ;AAIjBhS,MAAE,EAAEA,EAJa;AAKjB0S,aAAS,EAAEA;AALM,GAArB;AAOH;AAEM,SAASK,YAAT,GAAwB;AAC3B,MAAMC,YAAY,GAAGrB,SAAS,CAACqB,YAA/B;AAEA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAI,CAACH,YAAD,IAAiB,CAACA,YAAY,CAACI,gBAAnC,EAAqD;AACnDrX,aAAO,CAACC,GAAR,CAAY,gDAAZ;AACAkX,aAAO,CAAC,KAAD,CAAP;AACD;;AAEDF,gBAAY,CAACI,gBAAb,GAAgC9W,IAAhC,CAAqC,UAAC+W,OAAD,EAAa;AAChD,UAAIA,OAAO,CAACC,IAAR,CAAa,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAACC,IAAP,KAAgB,YAApB;AAAA,OAAnB,CAAJ,EAA0D;AACtDN,eAAO,CAAC,IAAD,CAAP;AACH,OAFD,MAEO;AACHA,eAAO,CAAC,KAAD,CAAP;AACH;AACF,KAND,WAMS;AAAA,aAAKC,MAAM,CAAC,KAAD,CAAX;AAAA,KANT;AAOD,GAbM,CAAP;AAcH,C","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/app/app.js\");\n","module.exports = __webpack_public_path__ + \"assets/icon-16.png\";","module.exports = __webpack_public_path__ + \"assets/icon-32.png\";","module.exports = __webpack_public_path__ + \"assets/icon-80_1.png\";","/*\n * Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n * See LICENSE in the project root for license information.\n */\n\nimport gatewayService, { GatewayService } from './services/gateway.service.js';\nimport filedataService from './services/filedata.service.js';\nimport sessionService from './services/session.service.js';\nimport * as attention from './attention.js';\nimport * as Utils from './utils.js';\n\n\n// images references in the manifest\nimport \"../../assets/icon-16.png\";\nimport \"../../assets/icon-32.png\";\nimport \"../../assets/icon-80_1.png\";\n\n/* global document, Office, Word */\n\nlet prodEnvironment;\nlet haveCamera;\nlet userIp;\nlet iter = 0;\nlet terms = [];\nlet customerFirstName;\nlet userFromOffice = false;\nlet userIsActive = false;\nlet isNewUser = false;\nlet counter = 0;\nlet outsideOffice = false;\nconst data = {\n  email: \"\",\n  password: \"\",\n}\n\nOffice.onReady(info => {\n  outsideOffice = (localStorage.getItem('outsideOffice') == 'true');\n  //localStorage.setItem('userFromOffice', userFromOffice);\n  if(userFromOffice){\n    console.log(\"Comienzo\");\n  }\n  \n  console.log(localStorage.getItem('word-document-name1'));\n  console.log(localStorage.getItem('word-document1')); \n  //console.log(info.document.Name);\n  if (info.host === Office.HostType.Word) {\n    getEnvironment();\n    Utils.detectWebcam().then((value) => {\n      haveCamera = value;\n    });\n    filedataService.getIp().then((respuesta) => {      \n      userIp = respuesta.ip;\n      console.log('userIp');\n      console.log(userIp);\n    }).catch(() => {\n      userIp = '127.0.0.1';\n    }).then(() =>{\n      localStorage.setItem('userIp', userIp);\n      //Begin Auth\n      if(localStorage.getItem('user') !== null && localStorage.getItem('noob') !== '0' && !outsideOffice) {\n        data.email = localStorage.getItem('user');\n        document.getElementById(\"email\").value = localStorage.getItem('user');\n        document.getElementById(\"firstName\").value = localStorage.getItem('firstName');\n        document.getElementById(\"lastName\").value = localStorage.getItem('lastName');\n        document.getElementById(\"customerMobile\").value = localStorage.getItem('customerMobile');\n        document.getElementById(\"header\").style.paddingTop = '10px';\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu información:';\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\n          element.style.display=\"none\";\n       }\n        moveTitles();\n\n        onInput();\n        submit();\n      } \n      //End Auth\n    });\n   \n    \n    \n    document.getElementById(\"sideload-msg\").style.display = \"none\";\n    document.getElementById(\"app-body\").style.display = \"flex\";\n    document.getElementById(\"email-field\").oninput = onInput;\n    document.getElementById(\"password-field\").oninput = onInput;\n    document.getElementById(\"login-form\").onsubmit = onSubmit;\n   \n  }\n});\n\n\nfunction onInput(event) {\n  if(event !== undefined){\n    event.preventDefault();\n    const { id, value } = event.target;\n    data[id] = value;\n  } \n  console.log(\"ON INPUT\");\n}\n\nfunction onSubmit(event) {\n  if(event !== undefined){\n  event.preventDefault();\n  }\n  document.getElementById(\"load-banner\").style.display =\"block\";\n\n  if (localStorage.getItem('noob') === '1' && localStorage.getItem('authId') === '0') {\n    //Start Create User\n    console.log('Inicio Proceso Creacion');\n    localStorage.setItem('authId', '1');\n    data.email = localStorage.getItem('user');\n    validateEmail();\n    document.getElementById(\"load-banner\").style.display =\"none\";\n    return;\n  }\n\n  const passDOM = document.getElementById('password');\n  if(passDOM.value !== \"\"){\n    data.password = passDOM.value;\n  }\n  \n  if (data.password === \"\") { \n    console.log(\"first val\");\n    validateEmail();\n    //document.getElementById(\"load-banner\").style.display = \"none\";\n    return;\n  }\n  submit();\n  //document.getElementById(\"load-banner\").style.display = \"none\";\n}\n\nfunction getEnvironment() {\n  prodEnvironment = window.location.href === 'https://app.mifirma.co/';\n}\n\nfunction submit() {\n  counter++;\n  console.log(`Attempt # ${counter} to submit...`);\n  document.getElementById(\"load-banner\").style.display =\"block\";\n\n\n  \n  if (data.password === \"\") { \n    validateEmail();\n    //document.getElementById(\"load-banner\").style.display = \"none\";\n    return;\n  }\n  if (data.email === \"\" && data.password === \"\") {    \n    showInputInvalid();\n    return;\n  }\n\n  if(isNewUser) {\n    console.log(`autenticating this new user with ${sessionService.authId} and ${data.password}`);\n  } else {\n    console.log(`no authentication has been done, will be done with ${sessionService.authId}`);\n  }\n\n  gatewayService.validate(sessionService.authId, data.password)\n    .then((respuesta) => {\n      if (respuesta.data.hit) {\n        var providedToken = respuesta.data.nextStep.properties.TOKEN;\n        if(typeof providedToken !== 'undefined'){\n          localStorage.setItem('token', providedToken);\n          window.resizeTo(1200, 650);\n          window.location.href = 'documentos.html'\n          //window.location.href = 'https://olsrvpruwtce01:6242/dist/documentos.html'\n        } else {\n          document.getElementById(\"load-banner\").style.display = \"none\";\n          new attention.Alert({\n            title: 'Error en el Backend',\n            content: 'No se ha definido el Token de autorización'\n        });\n        }\n        \n        //\n        //routerInstance.navigate('/firmador');\n      } else {\n        clearForm();\n        document.getElementById(\"load-banner\").style.display = \"none\";\n        document.getElementById(\"password-error\").style.display = \"block\";\n        document.getElementById('password').style.borderColor = 'tomato';\n        new attention.Alert({\n          title: 'Error de autenticación',\n          content: 'Contraseña Incorrecta'\n      });\n        //console.log('Contraseña Incorrecta');\n      }\n    }).catch((response) => {\n      console.log(response);\n      if (response.error && response.error.statusCode === 403) {\n        document.getElementById(\"password-error\").style.display = \"block\";\n        document.getElementById('password-error').style.borderColor = 'tomato';\n        document.getElementById('password-error').textContent= 'Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad';\n        console.log('Superó el máximo de intentos de autenticación, su usuario ha sido bloqueado por medidas de seguridad');\n        //this.router.navigateByUrl('');\n      } else {\n        //this.router.navigateByUrl('main/errorMifirma', { skipLocationChange: true });\n      }\n    });\n}\n\nfunction clearForm() {\n  data.password = \"\";\n}\n\n/**\n* Executes the login process\n*/\nfunction validateEmail() {\n  data.email = document.getElementById(\"email\").value;\n  if (data.email === \"\") {\n    showInputInvalid();\n    return;\n  }\n\n  const isMobile = window.innerWidth <= 640;\n  const isTablet = !isMobile && window.innerWidth <= 800;\n  const isDesktop = !isMobile && !isTablet;\n\n  const windowInfo = Utils.datosMaquina(window);\n\n  console.log('Validating...');\n  if(isNewUser){\n    console.log('this is a new user');\n  }\n  gatewayService.validateUser(\n    data.email,\n    '',\n    userIp,\n    windowInfo.browser,\n    '',\n    windowInfo.os,\n    isMobile,\n    isTablet,\n    isDesktop,\n    haveCamera,\n    false,\n    false\n  ).then((respuesta) => {\n    if (respuesta.data.userExists) {\n      console.log('Logeando user exist...');\n      login(respuesta);\n    } else {\n      //User not found, lets create one\n      const required1 = document.createAttribute(\"required\");\n      const required2 = document.createAttribute(\"required\");\n      const required3 = document.createAttribute(\"required\");\n      const required4 = document.createAttribute(\"required\");\n      document.getElementById(\"datos\").attributes.setNamedItem(required1);\n      document.getElementById(\"terms\").attributes.setNamedItem(required2);\n      document.getElementById(\"customerMobile\").attributes.setNamedItem(required3);\n      document.getElementById(\"firstName\").attributes.setNamedItem(required4);\n      localStorage.setItem('authId', respuesta.data.authId);\n      iter++;\n      console.log('Creando este nuevo usuario iter:');\n      if (localStorage.getItem('userFromOffice') && userFromOffice){\n        console.log('El usuario viene de office');\n      } else {\n        console.log('El usuario NO viene de office');\n      }\n      console.log(iter);\n      //console.log(respuesta);\n      for (let element of document.getElementsByClassName(\"thirdScreen\")){\n        element.style.display=\"block\";\n     }\n      var contentFromLS;\n      userFromOffice = (localStorage.getItem('userFromOffice') == 'true');\n      if (userFromOffice && !outsideOffice){\n        contentFromLS = getIdFromOffice();\n        console.log('El usuario SI viene de office');\n        RefreshLayout(); //To hide password and password confirm\n      } else {\n        console.log('El usuario NO viene de office');\n        localStorage.setItem('user', data.email);\n        document.getElementById(\"header\").style.paddingTop = '10px';\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu información:';\n        const req1 = document.createAttribute(\"required\");\n        const req2 = document.createAttribute(\"required\");\n        document.getElementById(\"password1\").attributes.setNamedItem(req1);\n        document.getElementById(\"password2\").attributes.setNamedItem(req2);\n\n        //return;\n      }\n      console.log(`fetched: ${contentFromLS}`);\n\n      if(iter>1){\n        \n        console.log(`iteracion: ${iter}`);\n        //Verificar contraseña\n        var pass1 = document.getElementById('password1');\n        var pass2 = document.getElementById('password2');\n        var isValid = pass1.classList.contains('valid');\n        console.log(`isvalid: ${isValid}`);\n        if (!isValid && !userFromOffice){\n          document.getElementById('load-banner').style.display = 'none';\n          return;\n        }\n        if(userFromOffice && !isNewUser){\n          createNewUser();\n        } else if (outsideOffice && !isNewUser){\n          createNewUser();\n        }\n      } \n\n      if(!userIsActive && iter>1){\n        return;\n      }\n\n      //after SUCCESS:\n      document.getElementById(\"load-banner\").style.display = \"none\";\n      \n      document.getElementById(\"user-error\").style.display = \"block\";\n      \n      //document.getElementById('email').style.borderColor = 'tomato';\n\n      /*new attention.Alert({\n        title: 'Usuario creado!...',\n        content: `auth: ${respuesta.data.authId}`\n    });   */\n      //console.log(\"user does not exist\")\n    }\n  }).catch((response) => {\n    console.log(\"user error\", response);\n    if (response.error && response.error.statusCode === 403) {\n      new attention.Alert({\n        title: 'Error de autenticación',\n        content: 'Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde'\n    });\n      //this.toastr.error('Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde');\n    } else {\n      //routerInstance.navigate('main/errorMifirma');\n    }\n  });\n}\n\nfunction RefreshLayout(){\n  var pass1 = document.getElementById('pass1'),\n    pass2 = document.getElementById('pass2'),\n    password1 = document.getElementById('password1'),\n    password2 = document.getElementById('password2');\n    pass1.style.display = 'none';\n    pass2.style.display = 'none';\n    document.getElementById(\"email\").disabled = true;\n    password1.value = localStorage.getItem('homeAccountIdentifier');\n    password2.value = password1.value;\n}\n\nfunction createNewUser(){\n  document.getElementById('load-banner').style.display = 'block';\n  console.log('pass:');\n  console.log(document.getElementById('password1').value);\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  gatewayService.createCustomer(\n    sessionService.firstName, \n    sessionService.lastName,  \n    document.getElementById('password1').value, \n    sessionService.user, \n    sessionService.customerMobile, \n    sessionService.userIp\n    ).then((Respuesta) => {\n      if(Respuesta.status === 'Created' && Respuesta.statusCode === 201){\n        console.log(Respuesta.message);\n        localStorage.setItem('idCustomer', Respuesta.data.idCustomer);\n        validateThisUser();\n      } else {\n        console.log(\"ERROR:\");\n        console.log(Respuesta);\n        return;\n      }\n      \n  });\n//Process\n//then\n  \n}\n\nfunction validateThisUser() {\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  gatewayService.validate(\n    sessionService.authId,\n    \"\"\n    ).then((Respuesta) =>{\n      \n      if (Respuesta.data.hit && Respuesta.data.nextStep.process === 'OTP') {\n        askOTPfromUser();\n      } else {\n        console.log(\"ERROR:\");\n        console.log(Respuesta);\n        return;\n      }\n  });\n}\n\nfunction askOTPfromUser(){\n  timeDown();\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  const modal = document.getElementById(\"otp-modal\");\n  //modal.style.overflow = \"hidden\";\n  document.querySelector(\".MF-inner\").style.overflow = \"hidden\";\n  modal.style.display = \"flex\";\n  const form = document.getElementById(\"otp-form\");\n  const phoneNumber = localStorage.getItem(\"phoneUser\");\n  const resendCode = document.getElementById('resend-code');\n  resendCode.addEventListener('click', function (){\n    document.getElementById('load-banner').style.display = 'block';\n    const windowInfo = Utils.datosMaquina(window);\n    const isMobile = window.innerWidth <= 640;\n    const isTablet = !isMobile && window.innerWidth <= 800;\n    const isDesktop = !isMobile && !isTablet;\n    gatewayService.validateUser(\n      data.email,\n      '',\n      userIp,\n      windowInfo.browser,\n      '',\n      windowInfo.os,\n      isMobile,\n      isTablet,\n      isDesktop,\n      haveCamera,\n      false,\n      false,\n      5,\n      sessionService.authId\n    ).then((respuesta) => {\n      if(respuesta.statusCode == 200){\n        timeDown();\n        console.log('Resend code successfull');\n        document.getElementById('load-banner').style.display = 'none';\n      }\n    });\n    //validateThisUser();\n  });\n  document.getElementById(\"phoneUs\").innerHTML = phoneNumber;\n  \n  form.addEventListener(\"submit\", e => {\n      e.preventDefault();\n      const pin = document.getElementById(\"opt-input\").value; \n      document.getElementById(\"load-banner\").style.display = \"block\";\n      console.log(`the pin: ${pin}`);\n      gatewayService.validate(\n        sessionService.authId, \n        pin\n        ).then((Respuesta) => {\n          if (Respuesta.data.hit) {\n            console.log('Que falta?');\n            console.log(Respuesta);\n            gatewayService.acceptTerms(\n              sessionService.userIp, \n              sessionService.idCustomer\n              ).then((Resp) => {\n                if (Resp.success){\n                  addToMiFirma();\n                }\n            });            \n\n          } else { //repeat OTP\n            document.getElementById('otp-error').style.display = 'block';\n            document.getElementById('otp-error').innerText='Código Incorrecto';\n            console.log(Respuesta);\n            askOTPfromUser();\n          }\n      });\n  });\n\n\n}\n\nfunction addToMiFirma(){\n  let auth_code;\n  gatewayService.addToMiFirma(\n    sessionService.firstName + ' ' + sessionService.lastName,\n    sessionService.user,\n    sessionService.customerMobile\n    ).then((Resp) => {\n      if(Resp.status_code === 201){\n        gatewayService.getValidationParameter(\n          sessionService.user\n        ).then((Respuesta) => {\n          if(Respuesta.statusCode == 200) {\n            auth_code = Respuesta.message;\n            const activationMessage = sessionService.user + '&&&' + auth_code;\n            const activationBase64 = window.btoa(activationMessage);\n            gatewayService.activateAccount(\n              activationBase64\n              ).then((Resp) => {\n                if(Resp.statusCode == 200){\n                  showSuccess();\n                } else {\n                  showProcessError();\n                }\n              });\n          } else {\n            showProcessError();\n          }\n        });     \n      } else {\n        showProcessError();\n      }\n    });\n}\n\nfunction showSuccess() {\n  isNewUser = true;\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  document.querySelector(\".MF-inner\").style.overflow = \"hidden\";\n  const modal = document.getElementById(\"otp-modal\");\n  //modal.style.overflow = \"hidden\";\n  const modalContent = document.getElementById(\"modal-content\");\n  modal.style.display = \"flex\";\n  modalContent.innerHTML = `\n  <div class=\"success-animation\">\n<svg class=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\"><circle class=\"checkmark__circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\" /><path class=\"checkmark__check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\" /></svg>\n</div>\n  <h2>Todo salió bien</h2>\n  <p>Ya puedes comenzar a usar MiFirma</p>\n    <div class=\"MF-center\">\n      <button class=\"MF-button3\" id=\"end-process\">Firmar ahora</button>\n    </div>\n  `;\n  document.getElementById('end-process').addEventListener('click', function (){\n    \n    data.email = sessionService.user;\n    if (userFromOffice){\n      data.password = sessionService.authority;\n    } else {\n      data.password = document.getElementById('password1').value;\n    }\n    console.log(`Iniciando Sesion... con ${data.email} y ${data.password}`); \n    validateEmail(); //this should refresh authid\n  }); \n}\n\nfunction showProcessError() {\n  isNewUser = false;\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  const modal = document.getElementById(\"otp-modal\");\n  const modalContent = document.getElementById(\"modal-content\");\n  modal.style.display = \"flex\";\n  modalContent.innerHTML = `<h2>Algo salió mal</h2>\n  <p>Por favor intente nuevamente mas tarde</p>`;\n}\n\nfunction login(respuesta) {\n  localStorage.setItem('personaNombre',\n    `${respuesta.data.user.customerFirstName} ${respuesta.data.user.customerLastName}`);\n  localStorage.setItem('phoneUser', respuesta.data.user.customerMobile);\n  localStorage.setItem('correo', data.email);\n  localStorage.setItem('personaId', respuesta.data.user.idCustomer);\n  localStorage.setItem('authId', respuesta.data.authId);\n\n  nextStep(respuesta);\n}\n\nfunction nextStep(respuesta) {\n  console.log('Next step:')\n  console.log(respuesta.data.nextStep.process);\n  switch (respuesta.data.nextStep.process) {\n    case 'Registro':\n      console.log('Registrando Usuario...');//not active\n      break;\n    case 'Terminos':\n      processTerms(respuesta);\n      break;\n    case 'Facial':\n      routerInstance.navigate(['login/facial']);\n      break;\n    case 'OTP':\n      routerInstance.navigate(['login']);\n      break;\n    case 'Password':\n      const fromOffice = (localStorage.getItem('userFromOffice') == 'true');\n      if(fromOffice) {\n        var content = getIdFromOffice();\n        console.log(content);\n        document.getElementById(\"password\").value = sessionService.authority;\n        data.password = document.getElementById(\"password\").value;\n        console.log('key: ');\n        console.log(data.password);\n        submit();\n      } else if(isNewUser) {\n        document.getElementById(\"password\").value = document.getElementById(\"password1\").value;\n        data.password = document.getElementById(\"password\").value;\n        console.log('key: ');\n        console.log(data.password);\n        submit();\n      }\n      else {\n        const requiredField = document.createAttribute(\"required\");\n        document.getElementById(\"customerName\").innerText = localStorage.getItem('personaNombre');\n        document.getElementById(\"password\").attributes.setNamedItem(requiredField);\n        document.getElementById(\"submit-btn\").textContent = \"Ingresar\";\n        document.getElementById(\"load-banner\").style.display = \"none\";\n        for (let element of document.getElementsByClassName(\"firstScreen\")){\n          element.style.display=\"none\";\n        }\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\n          element.style.display=\"block\";\n        }\n      }\n    break;\n  }\n}\n\nfunction processTerms(respuesta) {\n  if (JSON.stringify(respuesta.data.nextStep.properties) == '{}') {\n    gatewayService.validate(respuesta.data.authId, '').then((Respuesta) => {\n      if (!respuesta.data.user.isActive) {\n        //routerInstance.navigate(['registro/activar/cuenta']);\n      } else {\n        nextStep(Respuesta);\n      }\n    }).catch((response) => {\n      console.log(response)\n      if (response.error && response.error.statusCode === 403) {\n        console.log('Su usuario ha sido bloqueado por medidas de seguridad, intente más tarde');\n      } else {\n        // routerInstance.navigate('main/errorMifirma');\n      }\n    });\n  } else {\n    console.log(\"Unhandled Terms! \");\n    document.getElementById(\"load-banner\").style.display = \"none\";\n      new attention.Alert({\n        title: 'Terminos y condiciones',\n        content: 'Hemos actualizado nuestros términos y condiciones'\n    });  \n    for (let i in respuesta.data.nextStep.properties) {\n      terms.push(+respuesta.data.nextStep.properties[i]);\n    }\n    console.log(terms);\n    // this.fdService.terms(this.terms);\n    if (!respuesta.data.user.isActive) {\n      localStorage.setItem('noActive', 'false');\n    }\n    //routerInstance.navigate(['login/terminos']);\n  }\n}\n\nfunction showInputInvalid() {\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  new attention.Alert({\n        title: 'Error de autenticación',\n        content: 'Correo o contraseña inválidos'\n    }); \n  //console.log(\"invalid input\")\n}\n\nvar modalTerms = document.getElementById(\"terms-modal\");\n\n// Get the button that opens the modal\nvar btn1 = document.getElementById(\"list-terms\");\nvar btn2 = document.getElementById(\"list-data\");\n\n// Get the <span> element that closes the modal\nvar span = document.getElementsByClassName(\"close\")[0];\n\n// When the user clicks the button, open the modal \nbtn2.onclick = function() {\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  let HTMLContent = \"Empty String 2\";  \n  gatewayService.getUserTerms().then((Respuesta) => {\n    if(Respuesta.statusCode == 200){\n      HTMLContent = Respuesta.data[0].template;\n      document.getElementById(\"MF-cont\").innerHTML = HTMLContent.toString();\n      //console.log(HTMLContent);\n      document.getElementById(\"load-banner\").style.display =\"none\";\n    }\n  });\n  modalTerms.style.display = \"block\";\n  //document.getElementById(\"load-banner\").style.display =\"none\";\n}\n\nbtn1.onclick = function() {\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  let HTMLContent = \"Empty String 1\";\n  gatewayService.getUserTerms().then((Respuesta) => {\n    if(Respuesta.statusCode == 200){\n      HTMLContent = Respuesta.data[1].template;\n      document.getElementById(\"MF-cont\").innerHTML = HTMLContent.toString();\n      //console.log(HTMLContent);\n      document.getElementById(\"load-banner\").style.display =\"none\";\n    }\n  });\n  modalTerms.style.display = \"block\";\n  //document.getElementById(\"load-banner\").style.display =\"none\";\n}\n\n// When the user clicks on <span> (x), close the modal\nspan.onclick = function() {\n  modalTerms.style.display = \"none\";\n}\n\n// When the user clicks anywhere outside of the modal, close it\nwindow.onclick = function(event) {\n  if (event.target == modalTerms ) {\n    modalTerms.style.display = \"none\";\n  }\n}\n\n/**Front Password Validation */\ndocument.getElementById(\"password1\").addEventListener(\"focus\", validatePassword);\ndocument.getElementById(\"password1\").addEventListener(\"focusout\", () =>{\n    document.getElementById('float-validation').style.display = 'none';\n});\n\nfunction validatePassword(){\n    document.getElementById('float-validation').style.display = 'block';\n}\n\n\n(function(){\n  var password = document.getElementById('password1');\nvar passwordConfirm = document.getElementById('password2');\n  \n  var helperText = {\n      charLength: document.querySelector('.helper-text .length'),\n      lowercase: document.querySelector('.helper-text .lowercase'),\n      uppercase: document.querySelector('.helper-text .uppercase'),\n      special: document.querySelector('.helper-text .special'),\n    match: document.querySelector('.helper-text .match')\n  };\n  \n  var pattern = {\n      charLength: function() {\n          if( password.value.length >= 8 ) {\n              return true;\n          }\n      },\n      lowercase: function() {\n          var regex = /^(?=.*[a-z]).+$/; // Lowercase character pattern\n\n          if( regex.test(password.value) ) {\n              return true;\n          }\n      },\n      uppercase: function() {\n          var regex = /^(?=.*[A-Z]).+$/; // Uppercase character pattern\n\n          if( regex.test(password.value) ) {\n              return true;\n          }\n      },\n      special: function() {\n          var regex = /^(?=.*[0-9_\\W]).+$/; // Special character or number pattern\n\n          if( regex.test(password.value) ) {\n              return true;\n          }\n      }, \n    match: function() {\n          if( password.value == passwordConfirm.value ) {\n              return true;\n          }\n      }   \n  };\n  \n  // Listen for keyup action on password field\npassword.addEventListener('keyup', function (){\n      // Check that password is a minimum of 8 characters\n      patternTest( pattern.charLength(), helperText.charLength );\n      \n      // Check that password contains a lowercase letter      \n      patternTest( pattern.lowercase(), helperText.lowercase );\n      \n      // Check that password contains an uppercase letter\n      patternTest( pattern.uppercase(), helperText.uppercase );\n      \n      // Check that password contains a number or special character\n      patternTest( pattern.special(), helperText.special );\n  // Check that passwords matches\n      patternTest( pattern.match(), helperText.match );\n  \n  // Check that all requirements are fulfilled\n  if( hasClass(helperText.charLength, 'valid') &&\n            hasClass(helperText.lowercase, 'valid') && \n            hasClass(helperText.uppercase, 'valid') && \n            hasClass(helperText.special, 'valid') && \n            hasClass(helperText.match, 'valid')\n      ) {\n          addClass(password, 'valid');\n          addClass(passwordConfirm, 'valid');\n          removeClass(password, 'invalid');\n          removeClass(passwordConfirm, 'invalid');\n  }\n  else {\n    removeClass(password, 'valid');\n    removeClass(passwordConfirm, 'valid');\n    addClass(password, 'invalid');\n    addClass(passwordConfirm, 'invalid');\n  }\n  });\n\npasswordConfirm.addEventListener('keyup', function (){\n      // Check that password is a minimum of 8 characters\n      patternTest( pattern.charLength(), helperText.charLength );\n      \n      // Check that password contains a lowercase letter      \n      patternTest( pattern.lowercase(), helperText.lowercase );\n      \n      // Check that password contains an uppercase letter\n      patternTest( pattern.uppercase(), helperText.uppercase );\n      \n      // Check that password contains a number or special character\n      patternTest( pattern.special(), helperText.special );\n  // Check that passwords matches\n      patternTest( pattern.match(), helperText.match );\n  \n  // Check that all requirements are fulfilled\n  if( hasClass(helperText.charLength, 'valid') &&\n            hasClass(helperText.lowercase, 'valid') && \n            hasClass(helperText.uppercase, 'valid') && \n            hasClass(helperText.special, 'valid') && \n            hasClass(helperText.match, 'valid')\n      ) {\n          addClass(password, 'valid');\n          addClass(passwordConfirm, 'valid');\n          removeClass(password, 'invalid');\n          removeClass(passwordConfirm, 'invalid');\n  }\n  else {\n    removeClass(password, 'valid');\n    removeClass(passwordConfirm, 'valid');\n    addClass(password, 'invalid');\n    addClass(passwordConfirm, 'invalid');\n  }\n  });\n  \n  function patternTest(pattern, response) {\n      if(pattern) {\n    addClass(response, 'valid');\n    removeClass(response, 'invalid');\n  }\n  else {\n    removeClass(response, 'valid');\n    addClass(response, 'invalid');\n  }\n  }\n  \n  function addClass(el, className) {\n      if (el.classList) {\n          el.classList.add(className);\n      }\n      else {\n          el.className += ' ' + className;\n      }\n  }\n  \n  function removeClass(el, className) {\n      if (el.classList)\n              el.classList.remove(className);\n          else\n              el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n  }\n  \n  function hasClass(el, className) {\n      if (el.classList) {\n          return el.classList.contains(className);    \n      }\n      else {\n          new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className); \n      }\n  }\n  \n})();\n/**Front Password Validation */\n\nconst userFirstName = document.querySelector('#firstName');\nconst userLastName = document.querySelector('#lastName');\nconst customerMobile = document.querySelector('#customerMobile');\nconst togglePassword = document.querySelector('#togglePassword');\nconst togglePassword1 = document.querySelector('#togglePassword1');\nconst togglePassword2 = document.querySelector('#togglePassword2');\nconst password = document.querySelector('#password');\nconst password1 = document.querySelector('#password1');\nconst password2 = document.querySelector('#password2');\n\nuserFirstName.addEventListener('keyup', function (){\n  localStorage.setItem('firstName', userFirstName.value);\n});\n\nuserLastName.addEventListener('keyup', function (){\n  localStorage.setItem('lastName', userLastName.value);\n});\n\ncustomerMobile.addEventListener('keyup', function (){\n  localStorage.setItem('customerMobile', customerMobile.value);\n});\n\ntogglePassword.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';\n    password.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\ntogglePassword1.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password1.getAttribute('type') === 'password' ? 'text' : 'password';\n    password1.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\ntogglePassword2.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';\n    password2.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\n//new code for adding vanilla store (from main.js)\n\nfunction getIdFromOffice() {\n  var wantedId = 0;\n  var keys = Object.keys(localStorage),\n      i = keys.length;\n  while ( i-- ) {\n      var str = keys[i];\n      if(str.startsWith(\"{\")){\n        var obj = JSON.parse(str);\n        //console.log(obj);\n        for (var [key, value] of Object.entries(obj)) {\n          localStorage.setItem(key, value);\n          if(key === 'homeAccountIdentifier'){\n            console.log(`found: ${key}: ${value}`);\n            wantedId = value;\n            userFromOffice = true;\n            localStorage.setItem('userFromOffice', userFromOffice);\n          }      \n        }\n      }\n      \n      }\n  return wantedId;\n}\n\n\n$( \".MF-input\" ).keyup(function() {\n  //console.log($( this ).val());\n  if($( this ).val() == \"\"){\n  $( this ).siblings(\"label\").switchClass( \"MF-small\", \"MF-big\", 300, \"easeInOutQuad\" );\n  } else {\n  $( this ).siblings(\"label\").switchClass( \"MF-big\", \"MF-small\", 300, \"easeInOutQuad\" );\n  }\n    \n  });\n\n\n    function moveTitles() {\n      $( \".MF-input\" ).each(function() {\n        if($( this ).val() == \"\"){\n          $( this ).siblings(\"label\").switchClass( \"MF-small\", \"MF-big\", 300, \"easeInOutQuad\" );\n          } else {\n          $( this ).siblings(\"label\").switchClass( \"MF-big\", \"MF-small\", 300, \"easeInOutQuad\" );\n          }\n      });\n    }\n\nfunction timeDown(){\n  document.getElementById(\"resend-code\").style.display = 'none';\n  var seconds = 31;\n\n  // Update the count down every 1 second\n  var x = setInterval(function() {\n\n  seconds -=1;\n\n    document.getElementById(\"resend\").innerHTML =\"Reenviar código en \" + seconds + \"s \";\n\n    // If the count down is over, write some text \n    if (seconds < 0) {\n      clearInterval(x);\n      document.getElementById(\"resend-code\").style.display = 'block';\n      document.getElementById(\"resend\").innerHTML = \"\";\n    }\n  }, 1000);\n}","!(function(t, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module\n    ? n(exports)\n    : \"function\" == typeof define && define.amd\n    ? define([\"exports\"], n)\n    : n(((t = t || self).Attention = {}));\n})(this, function(t) {\n  \"use strict\";\n  function i(t, n) {\n    if (!(t instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n  function o(t, n) {\n    for (var e = 0; e < n.length; e++) {\n      var i = n[e];\n      (i.enumerable = i.enumerable || !1),\n        (i.configurable = !0),\n        \"value\" in i && (i.writable = !0),\n        Object.defineProperty(t, i.key, i);\n    }\n  }\n  function s(t, n, e) {\n    return n && o(t.prototype, n), e && o(t, e), t;\n  }\n  function n(t, n) {\n    if (\"function\" != typeof n && null !== n) throw new TypeError(\"Super expression must either be null or a function\");\n    (t.prototype = Object.create(n && n.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),\n      n && e(t, n);\n  }\n  function r(t) {\n    return (r = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function(t) {\n          return t.__proto__ || Object.getPrototypeOf(t);\n        })(t);\n  }\n  function e(t, n) {\n    return (e =\n      Object.setPrototypeOf ||\n      function(t, n) {\n        return (t.__proto__ = n), t;\n      })(t, n);\n  }\n  function a(t, n) {\n    return !n || (\"object\" != typeof n && \"function\" != typeof n)\n      ? (function(t) {\n          if (void 0 === t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return t;\n        })(t)\n      : n;\n  }\n  function c(t) {\n    return \"string\" == typeof t;\n  }\n  function l(t, n, e) {\n    var i = 0 < arguments.length && void 0 !== t ? t : \"div\",\n      o = 1 < arguments.length && void 0 !== n ? n : null,\n      s = 2 < arguments.length && void 0 !== e ? e : [],\n      r = document.createElement(i);\n    if (null !== o) {\n      var a = function(n) {\n        var t;\n        ((t = n).startsWith(\"on\") ? t.toLowerCase() : \"on\".concat(t)) in window\n          ? r.addEventListener(n, function(t) {\n              o[n](t, r);\n            })\n          : r.setAttribute(n, o[n]);\n      };\n      for (var c in o) a(c);\n    }\n    return (\n      0 < s.length &&\n        s.forEach(function(t) {\n          \"string\" == typeof t ? r.appendChild(document.createTextNode(t)) : r.appendChild(t);\n        }),\n      r\n    );\n  }\n  var u = (function() {\n      function n(t) {\n        i(this, n),\n          (this.options = t),\n          c(t.title) && (this.title = t.title),\n          (this.useInnerHTML = !0 === t.useInnerHTML),\n          c(t.content) && (this.content = t.content),\n          t.animation && (\"boolean\" == typeof t.animation || c(t.animation))\n            ? (this.animation = t.animation)\n            : (this.animation = \"fade\"),\n          (this.port = null),\n          (this.template = this.createBase());\n      }\n      return (\n        s(n, [\n          {\n            key: \"createBase\",\n            value: function() {\n              var t,\n                n = this,\n                e = l(\"div\", {\n                  class: \"close\",\n                  click: function() {\n                    n.close();\n                  }\n                });\n              return (\n                (e.innerHTML =\n                  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>'),\n                (this.port = l(\"div\", { class: \"port\" })),\n                (t = \"fade\" === this.animation ? \"opacity:0;\" : \"\"),\n                (this.container = l(\"div\", { class: \"attention-component\", style: t }, [\n                  l(\"div\", { class: \"inner\" }, [l(\"div\", { class: \"content\" }, [e, this.port])])\n                ])),\n                this.container\n              );\n            }\n          },\n          {\n            key: \"render\",\n            value: function(t) {\n              var n,\n                e,\n                i,\n                o = 0 < arguments.length && void 0 !== t ? t : document.body;\n              this.options.beforeRender && this.options.beforeRender(this),\n                o.appendChild(this.template),\n                this.options.afterRender && this.options.afterRender(this),\n                \"fade\" === this.animation &&\n                  ((n = this.template),\n                  (i = 0),\n                  window.requestAnimationFrame(function t() {\n                    100 <= i\n                      ? (window.cancelAnimationFrame(t), e && e(n))\n                      : ((i += 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\n                  }));\n            }\n          },\n          {\n            key: \"destroy\",\n            value: function() {\n              this.container.parentElement.removeChild(this.container),\n                this.options.afterClose && this.options.afterClose(this);\n            }\n          },\n          {\n            key: \"close\",\n            value: function() {\n              var n,\n                e,\n                i,\n                t = this;\n              this.options.beforeClose && this.options.beforeClose(this),\n                this.animation\n                  ? \"fade\" === this.animation &&\n                    ((n = this.container),\n                    (e = function() {\n                      t.destroy();\n                    }),\n                    (i = 100),\n                    window.requestAnimationFrame(function t() {\n                      i <= 0\n                        ? (window.cancelAnimationFrame(t), e && e(n))\n                        : ((i -= 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\n                    }))\n                  : this.destroy();\n            }\n          }\n        ]),\n        n\n      );\n    })(),\n    h = (function() {\n      function e(t) {\n        var n;\n        return i(this, e), (n = a(this, r(e).call(this, t))).injectTemplate(), n.render(), n;\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var t,\n                n = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              if ((this.port.appendChild(n), this.useInnerHTML)) {\n                var e = l(\"div\", { class: \"content\" });\n                (e.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [e]));\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\n              this.port.appendChild(n), this.port.appendChild(t);\n            }\n          }\n        ]),\n        e\n      );\n    })(),\n    p = (function() {\n      function e(t) {\n        var n;\n        return (\n          i(this, e),\n          ((n = a(this, r(e).call(this, t))).submitText = c(t.submitText) ? t.submitText : \"Send\"),\n          (n.placeholderText = c(t.placeholderText) ? t.placeholderText : \"Type\"),\n          n.injectTemplate(),\n          n.render(),\n          n\n        );\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"handleInput\",\n            value: function(t) {\n              (\"Enter\" !== t.key && 13 !== t.keyCode) || this.submit();\n            }\n          },\n          {\n            key: \"submit\",\n            value: function() {\n              var t = this.input.value;\n              \"\" !== t && (this.close(), this.options.onSubmit && this.options.onSubmit(this, t));\n            }\n          },\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var e = this,\n                t = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              this.port.appendChild(t),\n                (this.input = l(\"input\", {\n                  type: \"text\",\n                  class: \"input\",\n                  placeholder: this.placeholderText,\n                  keyup: function(t, n) {\n                    e.handleInput(t, n);\n                  }\n                }));\n              var n,\n                i = l(\"div\", { class: \"prompt-elements\" }, [\n                  this.input,\n                  l(\n                    \"button\",\n                    {\n                      class: \"button\",\n                      click: function() {\n                        e.submit();\n                      }\n                    },\n                    [this.submitText]\n                  )\n                ]);\n              if (this.useInnerHTML) {\n                var o = l(\"div\", { class: \"content\" });\n                (o.innerHTML = this.content), (n = l(\"div\", { class: \"inner-container\" }, [o, i]));\n              } else n = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content]), i]);\n              this.port.appendChild(t), this.port.appendChild(n);\n            }\n          }\n        ]),\n        e\n      );\n    })(),\n    d = (function() {\n      function e(t) {\n        var n;\n        return (\n          i(this, e),\n          ((n = a(this, r(e).call(this, t))).buttonCancel = c(t.buttonCancel) ? t.buttonCancel : \"No\"),\n          (n.buttonConfirm = c(t.buttonConfirm) ? t.buttonConfirm : \"Agree\"),\n          n.injectTemplate(),\n          n.render(),\n          n\n        );\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var t,\n                n = this,\n                e = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              if ((this.port.appendChild(e), this.useInnerHTML)) {\n                var i = l(\"div\", { class: \"content\" });\n                (i.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [i]));\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\n              t.appendChild(\n                l(\"div\", { class: \"buttons\" }, [\n                  l(\n                    \"button\",\n                    {\n                      class: \"cancel\",\n                      click: function() {\n                        n.close(), n.options.onCancel && n.options.onCancel(n);\n                      }\n                    },\n                    [this.buttonCancel]\n                  ),\n                  l(\n                    \"button\",\n                    {\n                      class: \"confirm\",\n                      click: function() {\n                        n.close(), n.options.onConfirm && n.options.onConfirm(n);\n                      }\n                    },\n                    [this.buttonConfirm]\n                  )\n                ])\n              ),\n                this.port.appendChild(e),\n                this.port.appendChild(t);\n            }\n          }\n        ]),\n        e\n      );\n    })();\n  (t.Alert = h),\n    (t.Confirm = d),\n    (t.Prompt = p),\n    (t.version = \"0.1.0\"),\n    Object.defineProperty(t, \"__esModule\", { value: !0 });\n});\n","class FiledataService {\n\n    getIp() {\n        return fetch('https://jsonip.com').then(response => response.json());\n    }\n\n}\n\nconst filedataService = new FiledataService();\n\nexport default filedataService;","const httpOptions = {\n    'Content-Type': 'application/json',\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ=='\n};\n\nconst httpOptions3 = {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n};\n\nconst httpOptions2 = () => ({\n    'Content-Type': 'application/json',\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ==',\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n});\n\nconst url = \"https://olsrvpruwbce01:6595/\";\nconst GatewayMiFirma = \"https://olsrvpruwbce01:6741/\";\n\nexport class GatewayService {\n\n    acceptTerms(userIp, idCustomer) {\n        const data = {\n            publicIP: userIp,\n            customerId: parseInt(idCustomer),\n            termsId: [7,8],\n        }\n        console.log('DATA ACC:');\n        console.log(data);\n        return fetch(`${url}Gateway/api/v2_0/terms/acceptance`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n\n    createCustomer(name, lastname, password, user, mobile, ip) {\n        const data = {\n            firstName: name,\n            lastName: lastname,\n            password: password,\n            user: user,\n            customerMobile: mobile,\n            publicIP: ip,\n        }\n        return fetch(`${url}Gateway/api/v2_0/createCustomer`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n    validateUser(user, phonenumber, ip, browser, userAgent, os, mobile, tablet,\n        desktop, camera, secondcamera, fingerprint, processCode, authId) {\n        const data = {\n            user: user,\n            phoneNumber: phonenumber,\n            deviceInfo: {\n                publicIp: ip,\n                browser: browser,\n                os: os,\n                isMobile: mobile,\n                isTablet: tablet,\n                isDesktop: desktop,\n                hasCamera: camera,\n                hasSecondaryCamera: secondcamera,\n                hasFingerprintReader: fingerprint\n            }\n        }\n        if (processCode !== \"\" || processCode !== undefined) data.processCode = processCode;\n        if (authId !== \"\" || authId !== undefined) data.authId = authId;\n        console.log(`processCode: ${processCode}`);\n        console.log(`authId: ${processCode}`);\n        console.log(data);\n        return fetch(`${url}Gateway/api/v2_0/validate/user`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n    validate(guid, data) {\n        const val = {\n            guid: guid,\n            data: data\n        }\n        console.log(val);\n        return fetch(`${url}Gateway/api/v2_0/validate`, {\n            method: \"POST\",\n            body: JSON.stringify(val),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n\n    getTerms() {\n        return fetch(`${url}Gateway/Terms`).then(response => response.json());\n    }\n\n    getEspecificTerms(ids) {\n        let id = \"\";\n        for (let i = 0; i < ids.length; i++) {\n            id += \"ids=\" + ids[i] + \"&\"\n        }\n\n        id = id.slice(0, -1)\n\n        return fetch(`${url}Gateway/EspecificTerms/${id}`).then(response => response.json());\n    }\n\n    resetPassword(pass) {\n        const data = {\n            newPassword: pass,\n        }\n        return fetch(`${url}Gateway/ResetPassword`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions2(),\n        }).then(response => response.json());\n    }\n\n    addToMiFirma(name, email, phoneNumber) {\n        const data = {\n            name: name,\n            email: email,\n            phoneNumber: parseInt(phoneNumber)\n        }\n        return fetch(`${GatewayMiFirma}Gateway/api/v1_0/user/create`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n\n    uploadSignature(file, fileName, fileExtension) {\n        console.log(httpOptions3);\n        const data = {\n            file: file,\n            fileName: fileName,\n            fileExtension: fileExtension\n        }\n        const path = `${GatewayMiFirma}Gateway/api/v1_0/graph/save`;\n        //console.log(path);\n        //console.log(data);\n        return fetch(path, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions3\n        }).then(response => response.json());\n    }\n\n    getValidationParameter(user) {\n        const path = `${url}Gateway/api/v2_0/customers/getValidationParameter/${user}`;\n        return fetch(path, {\n            method: \"GET\",\n            headers: httpOptions\n        }).then(response => response.json());\n    }\n\n    getUserTerms() {\n        const path = `${url}Gateway/api/v3_0/terms/enabled`;\n        return fetch(path, {\n            method: \"GET\",\n            headers: httpOptions\n        }).then(response => response.json());\n    }\n\n    activateAccount(activator) {\n        const data = {\n            activator: activator,\n        }\n        return fetch(`${url}Gateway/api/v2_0/customers/activateAccount`, {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: httpOptions,\n        }).then(response => response.json());\n    }\n\n\n}\n\nconst gatewayService = new GatewayService();\n\nexport default gatewayService;","class SessionService {\n  constructor() { }\n\n  get authority(){\n    return localStorage.getItem('homeAccountIdentifier');\n  }\n  get idCustomer() {\n    return localStorage.getItem('idCustomer');\n  }\n\n  get userId() {\n    return localStorage.getItem('personaId');\n  }\n\n  get authId() {\n    return localStorage.getItem('authId');\n  }\n\n  get identificadorOtp() {\n    return localStorage.getItem('identificadorOTP');\n  }\n\n  get recoRestrictive() {\n    return localStorage.getItem('reconoserRestrictive');\n  }\n\n  get otpRestrictive() {\n    return localStorage.getItem('otpRestrictive');\n  }\n\n  get username() {\n    return localStorage.getItem('personaNombre');\n  }\n\n  get documentUser() {\n    return localStorage.getItem('documento');\n  }\n\n  get emailUser() {\n    return localStorage.getItem('correo');\n  }\n\n  get reconoserGuid() {\n    return localStorage.getItem('reconoserGuid');\n  }\n\n  get reconoserUrl() {\n    return localStorage.getItem('reconoserUrl');\n  }\n\n  get validarOtp() {\n    return localStorage.getItem('validarOtp');\n  }\n\n  get phoneUser() {\n    return localStorage.getItem('celular');\n  }\n\n  get phoneUser2() {\n    return localStorage.getItem('phoneUser');\n  }\n\n  get isLogged() {\n    return localStorage.getItem('token') != null;\n  }\n\n  get isRequestPending() {\n    return localStorage.getItem('pendingRequest') != null;\n  }\n\n  get isANoob() {\n    return localStorage.getItem('noob') === '1';\n  }\n\n  get isNoobNull() {\n    return localStorage.getItem('noob') == null;\n  }\n\n  get firstName() {\n    return localStorage.getItem('firstName');\n  }\n\n  get lastName() {\n    return localStorage.getItem('lastName');\n  }\n\n  get customerMobile() {\n    return localStorage.getItem('customerMobile');\n  }\n\n  get user() {\n    return localStorage.getItem('user');\n  }\n\n  get userIp() {\n    return localStorage.getItem('userIp');\n  }\n\n\n  set signatureGuid(value) {\n    localStorage.setItem('firma', value);\n  }\n\n  logout() {\n    let noob = localStorage.getItem('noob');\n    if (noob == null) {\n        noob = '1';\n    }\n    localStorage.clear();\n    localStorage.setItem('noob', noob);\n  }\n}\n\nconst sessionService = new SessionService();\n\nexport default sessionService;","// This file contains utility functions used across the application\n\n/**\n * Converts an unsigned array to a uri base64 string\n * @param data Array of unsigned integers data\n */\n\n\nexport function Uint8ArrayToStringBase64(data) {\n    let binary = '';\n    const len = data.byteLength;\n\n    for (let i = 0; i < len; ++i) {\n        binary += String.fromCharCode(data[i]);\n    }\n    return window.btoa(binary);\n}\n\n/**\n * Converts a uri base64 string to an unsigned array\n * @param src Uri base64 data\n */\nexport function stringToUint(src) {\n    const binary = window.atob(src);\n    const len = binary.length;\n    const bytes = new Uint8Array(len);\n\n    for (let i = 0; i < len; ++i) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n}\n\nexport function logout(router) {\n    let noob = localStorage.getItem('noob');\n    if (noob == null) {\n        noob = '1';\n    }\n    localStorage.clear();\n    localStorage.setItem('noob', noob);\n    router.navigateByUrl('');\n}\n\n/**\n * Given a uri representation of an image of the form data:image/extension;base64, data, it returns the extesion of the image\n * @param base64 uri base64 data\n */\nexport function getExtensionImageFromURI(base64) {\n    if (base64.length <= 22 || base64.substr(0, 4) !== 'data') {\n        throw new Error('Invalid URI');\n    }\n    const l = base64.indexOf(':') + 1;\n    if (l !== 5) {\n        throw new Error('Invalid URI');\n    }\n    const type = base64.substr(l, 6);\n    if (type !== 'image/') {\n        throw new Error('Invalid URI');\n    }\n    const semicolon = base64.indexOf(';') + 1;\n\n    if (semicolon === 0) {\n        throw new Error('Invalid URI');\n    }\n\n    const uri = base64.substr(semicolon, 7);\n\n    if (uri !== 'base64,') {\n        throw new Error('Invalid URI');\n    }\n\n    const extension = base64.substr(l + 6, semicolon - 1 - l - 6);\n\n    return extension.toLowerCase();\n}\n\n/**\n * Transforms a URI - base64 to a blob\n */\nexport function b64toBlob(dataURI) {\n    const byteString = atob(dataURI.split(',')[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type: 'application/pdf' });\n}\n\n/**\n * Gets the hexadecimal representation of a rgba color\n */\nexport function getHexColorFromRgba(color) {\n    if (color === 'rgba(158,234,170,0.5)') {\n        return '#9eeaaa';\n    } else {\n        return '#a0daff';\n    }\n}\n\n/**\n * Returns an object with details about the client machine\n * @param window window object\n */\nexport function datosMaquina(window) {\n    {\n        const unknown = 'unknown';\n\n        // browser\n        const nVer = navigator.appVersion;\n        const nAgt = navigator.userAgent;\n        var browser = navigator.appName;\n        var version = '' + parseFloat(navigator.appVersion);\n        var majorVersion = parseInt(navigator.appVersion, 10);\n        let nameOffset;\n        let verOffset;\n        let ix;\n\n        if ((verOffset = nAgt.indexOf('Opera')) != -1) {\n            browser = 'Opera';\n            version = nAgt.substring(verOffset + 6);\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\n                version = nAgt.substring(verOffset + 8);\n            }\n        }\n        if ((verOffset = nAgt.indexOf('OPR')) != -1) {\n            browser = 'Opera';\n            version = nAgt.substring(verOffset + 4);\n        } else if ((verOffset = nAgt.indexOf('Edge')) != -1) {\n            browser = 'Microsoft Edge';\n            version = nAgt.substring(verOffset + 5);\n        } else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\n            browser = 'Microsoft Internet Explorer';\n            version = nAgt.substring(verOffset + 5);\n        } else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\n            browser = 'Chrome';\n            version = nAgt.substring(verOffset + 7);\n        } else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\n            browser = 'Safari';\n            version = nAgt.substring(verOffset + 7);\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\n                version = nAgt.substring(verOffset + 8);\n            }\n        } else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\n            browser = 'Firefox';\n            version = nAgt.substring(verOffset + 8);\n        } else if (nAgt.indexOf('Trident/') != -1) {\n            browser = 'Microsoft Internet Explorer';\n            version = nAgt.substring(nAgt.indexOf('rv:') + 3);\n        } else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\n            browser = nAgt.substring(nameOffset, verOffset);\n            version = nAgt.substring(verOffset + 1);\n            if (browser.toLowerCase() === browser.toUpperCase()) {\n                browser = navigator.appName;\n            }\n        }\n        // trim the version string\n        if ((ix = version.indexOf(';')) != -1) {\n            version = version.substring(0, ix);\n        }\n        if ((ix = version.indexOf(' ')) != -1) {\n            version = version.substring(0, ix);\n        }\n        if ((ix = version.indexOf(')')) != -1) {\n            version = version.substring(0, ix);\n        }\n\n        majorVersion = parseInt('' + version, 10);\n        if (isNaN(majorVersion)) {\n            version = '' + parseFloat(navigator.appVersion);\n            majorVersion = parseInt(navigator.appVersion, 10);\n        }\n\n        // system\n        var os = unknown;\n        const clientStrings = [\n            { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n            { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n            { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n            { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n            { s: 'Windows Vista', r: /Windows NT 6.0/ },\n            { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n            { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n            { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n            { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n            { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n            { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n            { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n            { s: 'Windows CE', r: /Windows CE/ },\n            { s: 'Windows 3.11', r: /Win16/ },\n            { s: 'Android', r: /Android/ },\n            { s: 'Open BSD', r: /OpenBSD/ },\n            { s: 'Sun OS', r: /SunOS/ },\n            { s: 'Chrome OS', r: /CrOS/ },\n            { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n            { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n            { s: 'Mac OS X', r: /Mac OS X/ },\n            { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n            { s: 'QNX', r: /QNX/ },\n            { s: 'UNIX', r: /UNIX/ },\n            { s: 'BeOS', r: /BeOS/ },\n            { s: 'OS/2', r: /OS\\/2/ },\n            { s: 'Search Bot', r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/ }\n        ];\n        for (var id in clientStrings) {\n            var cs = clientStrings[id];\n            if (cs.r.test(nAgt)) {\n                os = cs.s;\n                break;\n            }\n        }\n\n        var osVersion = unknown;\n\n        if (/Windows/.test(os)) {\n            osVersion = /Windows (.*)/.exec(os)[1];\n            os = 'Windows';\n        }\n\n        switch (os) {\n            case 'Mac OS X':\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\n                break;\n\n            case 'Android':\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\n                break;\n\n            case 'iOS':\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n                break;\n        }\n    }\n\n    return window.jscd = {\n        browser: browser,\n        browserVersion: version,\n        browserMajorVersion: majorVersion,\n        os: os,\n        osVersion: osVersion\n    };\n}\n\nexport function detectWebcam() {\n    const mediaDevices = navigator.mediaDevices;\n\n    return new Promise((resolve, reject) => {\n      if (!mediaDevices || !mediaDevices.enumerateDevices) {\n        console.log('No hay media devices, saltar al próximo paso !');\n        resolve(false);\n      }\n\n      mediaDevices.enumerateDevices().then((devices) => {\n        if (devices.some(device => device.kind === 'videoinput')) {\n            resolve(true);\n        } else {\n            resolve(false);\n        }\n      }).catch(()=> reject(false));\n    });\n}"],"sourceRoot":""}